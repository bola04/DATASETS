<!DOCTYPE HTML>
 <html lang="de">
  <head>
   <meta charset="utf-8"/>
   <title>
    Stadtplan - Bielewelt
   </title>
   <base href="http://www.bielewelt.de/"/>
   <meta content="index,follow" name="robots"/>
   <meta content="" name="description"/>
   <meta content="" name="keywords"/>
   <script src="system/scripts/e53a815ab435.js">
   </script>
   <link href="style.css" media="screen" rel="stylesheet" type="text/css"/>
   <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript">
   </script>
   <script src="OpenLayers.js" type="text/javascript">
   </script>
   <script src="system/modules/cfs_maps/html/js/CFSMaps.js" type="text/javascript">
   </script>
   <link href="img/favicon.ico" rel="shortcut icon" title="Favicon" type="image/x-icon"/>
   <!--[if lt IE 9]><script src="plugins/html5shim/html5-3.js"></script><![endif]-->
  </head>
  <body class="unknown other" id="top">
   <div id="wrapper">
    <header id="header">
     <div class="inside">
      <!-- indexer::stop -->
      <nav class="mod_navigation block">
       <a class="invisible" href="#skipNavigation9">
        Navigation überspringen
       </a>
       <img alt="bielewelt" id="logo" src="img/bielewelt-0.png" title="bielewelt"/>
       <a href="/" title="bielewelt">
        <img alt="Stadtplan" id="nav_stadtplan" src="img/stadtplan.png" title="Stadtplan"/>
       </a>
       <a href="ueber-bielewelt" title="über bielewelt">
        <img alt="über bielewelt" id="info" src="img/ueber-bielewelt.png" title="über bielewelt"/>
       </a>
       <a href="ort-melden" title="Ort melden">
        <img alt="Ort melden" id="nav_ortmelden" src="img/ort-melden.png" title="Ort melden"/>
       </a>
       <img alt="Stadtplan" id="sonne" src="img/stadtplan-sonne.png"/>
       <img alt="über bielewelt" class="invisible" id="vogel" src="img/ueber-bielewelt-vogel.png"/>
       <img alt="Ort melden" class="invisible" id="krebs" src="img/ort-melden-krebs.png"/>
       <a class="invisible" id="skipNavigation9">
       </a>
      </nav>
      <!-- indexer::continue -->
     </div>
    </header>
    <div id="container_nojs">
     Bitte aktiviere JavaScript in deinem Browser!
    </div>
    <div id="container">
     <aside id="right">
      <div class="inside">
       <div id="lupe">
       </div>
       <form action="suche" method="get">
        <input name="suche" placeholder="Suche" type="search"/>
       </form>
       <div class="clear">
       </div>
       <div id="kategorien">
        <div id="kat_header">
         Kategorien
        </div>
        <div class="kat_eintrag spielplaetze" id="hauptkat-14">
         <div class="hauptkat_eintrag" id="kat-14">
          <div class="checkbox">
          </div>
          Spielplätze
         </div>
        </div>
        <div class="kat_eintrag sport" id="hauptkat-15">
         <div class="hauptkat_eintrag" id="kat-15">
          <div class="checkbox">
          </div>
          Sport
         </div>
         <div class="pfeil inaktiv">
         </div>
         <div class="subkat_eintrag sport" id="kat-16">
          <div class="checkbox">
          </div>
          Bolzplätze
         </div>
         <div class="subkat_eintrag sport" id="kat-17">
          <div class="checkbox">
          </div>
          Reithöfe
         </div>
         <div class="subkat_eintrag sport" id="kat-18">
          <div class="checkbox">
          </div>
          Funsport
         </div>
         <div class="subkat_eintrag sport" id="kat-21">
          <div class="checkbox">
          </div>
          Rodelbahnen
         </div>
         <div class="subkat_eintrag sport" id="kat-22">
          <div class="checkbox">
          </div>
          Schwimmbäder
         </div>
        </div>
        <div class="kat_eintrag jugendzentren" id="hauptkat-24">
         <div class="hauptkat_eintrag" id="kat-24">
          <div class="checkbox">
          </div>
          Jugendzentren
         </div>
        </div>
        <div class="kat_eintrag tolle-orteausflugsziele" id="hauptkat-25">
         <div class="hauptkat_eintrag" id="kat-25">
          <div class="checkbox">
          </div>
          tolle Orte/Ausflugsziele
         </div>
        </div>
        <div class="kat_eintrag bildung" id="hauptkat-27">
         <div class="hauptkat_eintrag" id="kat-27">
          <div class="checkbox">
          </div>
          Bildung
         </div>
         <div class="pfeil inaktiv">
         </div>
         <div class="subkat_eintrag bildung" id="kat-28">
          <div class="checkbox">
          </div>
          Schulen, Kindergärten, Uni
         </div>
         <div class="subkat_eintrag bildung" id="kat-29">
          <div class="checkbox">
          </div>
          Musik
         </div>
         <div class="subkat_eintrag bildung" id="kat-30">
          <div class="checkbox">
          </div>
          Büchereien
         </div>
         <div class="subkat_eintrag bildung" id="kat-31">
          <div class="checkbox">
          </div>
          Museen
         </div>
        </div>
        <div class="kat_eintrag beratung" id="hauptkat-32">
         <div class="hauptkat_eintrag" id="kat-32">
          <div class="checkbox">
          </div>
          Beratung
         </div>
        </div>
        <div class="kat_eintrag infos" id="hauptkat-33">
         <div class="hauptkat_eintrag" id="kat-33">
          <div class="checkbox">
          </div>
          Infos
         </div>
         <div class="pfeil inaktiv">
         </div>
         <div class="subkat_eintrag infos" id="kat-34">
          <div class="checkbox">
          </div>
          Jugendverbände
         </div>
         <div class="subkat_eintrag infos" id="kat-35">
          <div class="checkbox">
          </div>
          Ferienspiele
         </div>
         <div class="subkat_eintrag infos" id="kat-36">
          <div class="checkbox">
          </div>
          Feste
         </div>
        </div>
       </div>
      </div>
     </aside>
     <div id="main">
      <div class="inside">
       <div id="mapdiv">
       </div>
      </div>
      <div id="clear">
      </div>
     </div>
    </div>
    <footer id="footer">
     <div class="inside">
      <div id="projekte">
       <div class="inside">
        <div id="projekte_pfeil">
         Weitere Projekte des BJR
        </div>
        <a href="http://www.sre-bielefeld.de/" onclick="window.open(this.href); return false;" title="Stadtranderholung">
         <img alt="Logo Stadtranderholung" class="footerlogo" height="76" src="tl_files/Bilder/Logos/BJR-Projekte/stadtranderholung-0.jpg" title="Stadtranderholung" width="95"/>
        </a>
        <a href="http://www.radiokurzwelle.de/" onclick="window.open(this.href); return false;" title="Radio Kurzwelle">
         <img alt="Logo Radio Kurzwelle" class="footerlogo" height="77" src="tl_files/Bilder/Logos/BJR-Projekte/radio-kurzwelle-0.png" title="Radio Kurzwelle" width="75"/>
        </a>
        <a href="http://www.netzlichter.de" onclick="window.open(this.href); return false;" title="Netzlicher TV">
         <img alt="Logo Netzlicher TV" class="footerlogo" height="77" src="tl_files/Bilder/Logos/BJR-Projekte/netzlichter-tv-0.png" title="Netzlicher TV" width="83"/>
        </a>
        <a href="http://www.kompott.org" onclick="window.open(this.href); return false;" title="kompott.org">
         <img alt="Logo kompott.org" class="footerlogo" height="37" src="tl_files/Bilder/Logos/BJR-Projekte/kompott-0.png" title="kompott.org" width="149"/>
        </a>
        <a href="http://www.kinderkulturkalender.de" onclick="window.open(this.href); return false;" title="Kinderkulturkalender">
         <img alt="Logo Kinderkulturkalender" class="footerlogo" height="66" src="tl_files/Bilder/Logos/BJR-Projekte/kinderkulturkalender-0.png" title="Kinderkulturkalender" width="67"/>
        </a>
        <div id="nav">
         <div id="navtext">
          © Bielefelder Jugendring e.V. 2012
          <a href="kontakt" title="Kontakt und Impressum">
           Kontakt/Impressum
          </a>
          <br/>
          <a href="datenschutz" title="Datenschutzerklärung">
           Datenschutz
          </a>
          <br/>
          <br/>
         </div>
        </div>
       </div>
      </div>
      <div id="sponsoren">
       <div class="inside">
        <div id="sponsoren_pfeil">
         bielewelt wird unterstützt von
        </div>
       </div>
      </div>
     </div>
    </footer>
   </div>
   <script>
    jQuery('#container_nojs').hide();
 jQuery('#container').css({'display':'block'});
     map = new OpenLayers.Map({
             div: "mapdiv",
                     controls: []
   });
         var layer   = new OpenLayers.Layer.OSM.German();
 
     map.addLayer(layer);
 
 
     map.addControl (new OpenLayers.Control.ScaleLine());
     map.addControl (new OpenLayers.Control.Navigation());
 	map.addControl(new OpenLayers.Control.MouseDefaults());
 	map.addControl (new OpenLayers.Control.PanZoomBar());
 
     //Set start centrepoint and zoom
     var lonLat = new OpenLayers.LonLat( 8.5448919032749, 52.016961703195 )
           .transform(
             new OpenLayers.Projection("EPSG:4326"), // transform from WGS 1984
             map.getProjectionObject() // to Spherical Mercator Projection
           );
 
     var zoom=13;
 	var pois = new OpenLayers.Layer.Text();
     map.setCenter (lonLat, zoom);
 
 
 var pois = null;
 
 
 
 function onFeatureSelect(evt) {
 if (map.popups.length > 0)
 	onFeatureUnselect();
  feature = evt.feature;
         var handler = function( event){
             window.location.href=feature.attributes.url;
             $(this).unbind( event );
         }
 
         $('#mapdiv image').bind( 'click', handler );
 	if (map.popups.length == 0) {
 	popup = new OpenLayers.Popup.FramedCloud("featurePopup",
                              feature.geometry.getBounds().getCenterLonLat(),
                              new OpenLayers.Size(50,50),
                              "<h2>"+feature.attributes.title + "</h2>" +
                              feature.attributes.description,
                              popup_anchor(map, feature), true, onFeatureUnselect
 			     );
 
 
 		    feature.popup = popup;
 		    popup.feature = feature;
 		    map.addPopup(popup);
 
 
   var pop_titel = popup.feature.data.title
 
 
 
 	}
 
 }
 function onFeatureUnselect() {
 
 	map.popups[0].destroy();
 
 }
 
 function popup_anchor(map, f) {
  var b = f.geometry.getBounds();
  var m_size = map.getSize();
  var extent = map.getExtent();
  var px_o = map.getViewPortPxFromLonLat(new OpenLayers.LonLat(b.left, b.top));
  var px_u = map.getViewPortPxFromLonLat(new OpenLayers.LonLat(b.right, b.bottom));
  var px_size = new OpenLayers.Size(Math.abs(px_o.x - px_u.x), Math.abs(px_o.y - px_u.y));
  var q = extent.determineQuadrant(f.geometry.getBounds().getCenterLonLat());
  var strokeWidth = f.layer.styleMap.styles.temporary.defaultStyle.strokeWidth;
  var px_off, px_off_x = 0, px_off_y = 0, delta_x = 0, delta_y = 0;
 
  if (px_size.w == 0 && px_size.h == 0) { // Kreis oder Icon
   var icon_dx = f.layer.styleMap.styles.default.defaultStyle.graphicWidth;
   var icon_dy = f.layer.styleMap.styles.default.defaultStyle.graphicHeight;
   var radius = f.layer.styleMap.styles.default.defaultStyle.pointRadius;
   if (radius) { // Kreis
    px_size.w = (radius + strokeWidth) * 2;
    px_size.h = px_size.w;
    if (strokeWidth) {
     delta_y = -strokeWidth;
     delta_x = 0;
    }
   } else {
    if (icon_dx && icon_dy) { // Icon
     px_size.w = icon_dx; px_size.h = icon_dy;
     delta_x = f.layer.styleMap.styles.default.defaultStyle.graphicXOffset;
     delta_y = f.layer.styleMap.styles.default.defaultStyle.graphicYOffset;
    }
   }
  } else {
   if (strokeWidth)
    delta = strokeWidth;
  }
 
  if (q.indexOf("l") == 1)
   px_off_x = -px_size.w;
  else
   px_off_x = 0;
 
  if (q.indexOf("t") == 0)
   px_off_y = -px_size.h / 2 - delta_y;
  else
   px_off_y = -px_size.h / 2 + delta_x;
 
  px_off = new OpenLayers.Pixel(px_off_x, px_off_y);
  return {size: px_size, offset: px_off};
 }
 
 
 $(".pfeil").click(function()
 {
 	if($(this).attr("class")=="pfeil inaktiv")
 	{
 		$("#"+$(this).parent().attr('id')+" .subkat_eintrag").css({"display":"block"});
 		$(this).attr("class", "pfeil aktiv");
 	}
 	else
 	{
 		$("#"+$(this).parent().attr('id')+" .subkat_eintrag").css({"display":"none"});
 		$(this).attr("class", "pfeil inaktiv");
 	}
 });
 
 
 
 
 $(".hauptkat_eintrag, .subkat_eintrag").click(function()
 {
     	katnr="";
     	katname="";
 
     	if($(".checkbox",this).text()=="×")
     	{
     		$(".checkbox",this).text("");
     		$(".checkbox",this).attr("class", "checkbox");
 			if($(this).attr('class')=="hauptkat_eintrag")
 			{
 				$("#"+$(this).parent().attr('id')+" .subkat_eintrag .checkbox").text("");
 				$("#"+$(this).parent().attr('id')+" .subkat_eintrag .checkbox").attr("class", "checkbox");
 			}
 			else
 			{
 				$("#"+$(this).parent().attr('id')+" .subkat_eintrag").each(function () {
 					if($(".checkbox",this).text()=="×")
 					{
 						$("#"+$(this).parent().attr('id')+" .hauptkat_eintrag .checkbox").attr("class", "checkbox subaktiv");
 						return false;
 					}
 					else
 						$("#"+$(this).parent().attr('id')+" .hauptkat_eintrag .checkbox").attr("class", "checkbox");
 
 				});
 			}
     	}
     	else
     	{
     		$(".checkbox",this).text("×");
 			$(".checkbox",this).attr("class", "checkbox aktiv");
 			if($(this).attr('class')=="hauptkat_eintrag")
 			{
 				$("#"+$(this).parent().attr('id')+" .subkat_eintrag").css({"display":"block"});
 				$("#"+$(this).parent().attr('id')+" .pfeil").attr("class", "pfeil aktiv");
 				$("#"+$(this).parent().attr('id')+" .subkat_eintrag .checkbox").text("×");
 				$("#"+$(this).parent().attr('id')+" .subkat_eintrag .checkbox").attr("class", "checkbox aktiv");
 			}
 			else
 			{
 				$("#"+$(this).parent().attr('id')+" .subkat_eintrag").each(function () {
 					if($(".checkbox",this).text()=="")
 					{
 						$("#"+$(this).parent().attr('id')+" .hauptkat_eintrag .checkbox").attr("class", "checkbox subaktiv");
 						$("#"+$(this).parent().attr('id')+" .hauptkat_eintrag .checkbox").text('×');
 						return false;
 					}
 					else
 					{
 						$("#"+$(this).parent().attr('id')+" .hauptkat_eintrag .checkbox").attr("class", "checkbox aktiv");
 						$("#"+$(this).parent().attr('id')+" .hauptkat_eintrag .checkbox").text('×');
 					}
 
 				});
 			}
     	}
 
 		var i=0;
 		$('.checkbox').each(function() {
     		if($(this).text()=="×")
     		{
     			katnr=katnr+"&katnr["+i+"]="+$(this).parent().attr('id').substring(4);
     			if($(this).parent().attr('class')=="hauptkat_eintrag")
     				katname=katname+"&katname["+i+"]="+$("#"+$(this).parent().parent().attr('id')).attr('class').substring(12);
     			else
     				katname=katname=katname+"&katname["+i+"]="+$("#"+$(this).parent().attr('id')).attr('class').substring(15);
     			i++;
     		}
 		});
 		if(pois!=null)
 			var poistemp=pois;
 		else
 			var poistemp=null;
 
 		katnr=katnr.substring(1);
 
 		pois = new OpenLayers.Layer.GML("My Points",
 							"/pois.php?"+katnr+"&katname="+katname,
 							{ format: OpenLayers.Format.Text });
 		map.addLayer(pois);
 		pois.events.register("featureselected", pois, onFeatureSelect);
 
 		if ("ontouchstart" in window || navigator.msMaxTouchPoints)
 			var control = new OpenLayers.Control.SelectFeature(pois, {onSelect:true, onUnselect:onFeatureUnselect});
 		else
 			var control = new OpenLayers.Control.SelectFeature(pois, {hover:true, onUnselect:onFeatureUnselect});
 
 		map.addControl(control);
 		control.activate();
 		if(poistemp!=null)
 			map.removeLayer(poistemp);
 });
 
 
 jQuery(document).ready(function(jQuery){
 jQuery('#container_nojs').hide();
 jQuery('#container').css({'display':'block'});
 jQuery("#nav_stadtplan").hover(
   function () {
     jQuery('#sonne').show();
   },
   function () {
   	if(jQuery('#sonne').attr('class')=="invisible")
     	jQuery('#sonne').hide();
   }
 );
 jQuery("#info").hover(
   function () {
     jQuery('#vogel').show();
   },
   function () {
     if(jQuery('#vogel').attr('class')=="invisible")
     	jQuery('#vogel').hide();
   }
 );
 jQuery("#nav_ortmelden").hover(
   function () {
     jQuery('#krebs').show();
   },
   function () {
     if(jQuery('#krebs').attr('class')=="invisible")
     	jQuery('#krebs').hide();
   }
 );
 jQuery('a img').hover(
   function () {
   	var src = jQuery(this).attr("src");
 	src=src.replace(/-0./g, "-1.");
     jQuery(this).attr("src",src);
   },
   function () {
   	var src = jQuery(this).attr("src");
 	src=src.replace(/-1./g, "-0.");
     jQuery(this).attr("src",src);
   }
 );
 });
   </script>
   <script>
    new Request({
   url:'system/html/cron.txt',
   onComplete: function(txt) {
     if (!txt) txt = 0;
     if (parseInt(txt) < (Math.round(+new Date()/1000) - 300)) {
       new Request({url:'cron.php'}).get();
     }
   }
 }).get();
   </script>
  </body>
 </html>