<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
 <head profile="http://gmpg.org/xfn/11">
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
  <meta content="IE=EmulateIE7" http-equiv="X-UA-Compatible"/>
  <title>
   Walking Randomly
  </title>
  <link href="http://feeds.feedburner.com/WalkingRandomly" rel="alternate" title="RSS 2.0 - all posts" type="application/rss+xml"/>
  <link href="http://www.walkingrandomly.com/?feed=comments-rss2" rel="alternate" title="RSS 2.0 - all comments" type="application/rss+xml"/>
  <link href="http://www.walkingrandomly.com/xmlrpc.php" rel="pingback"/>
  <!-- style START -->
  <link href="http://www.walkingrandomly.com/wp-content/themes/elegant-box/style.css" media="screen" rel="stylesheet" type="text/css"/>
  <!--[if IE]>
		<link rel="stylesheet" href="http://www.walkingrandomly.com/wp-content/themes/elegant-box/ie.css" type="text/css" media="screen" />
	<![endif]-->
  <!-- default style -->
  <link href="http://www.walkingrandomly.com/wp-content/themes/elegant-box/styles/blue/default.css" media="screen" rel="stylesheet" title="blue" type="text/css"/>
  <link href="http://www.walkingrandomly.com/wp-content/themes/elegant-box/styles/blue/global.css" media="screen" rel="stylesheet" type="text/css"/>
  <!-- others styles -->
  <!-- style END -->
  <!-- javascript START -->
  <script src="http://www.walkingrandomly.com/wp-content/themes/elegant-box/js/base.js" type="text/javascript">
  </script>
  <script src="http://www.walkingrandomly.com/wp-content/themes/elegant-box/js/menu.js" type="text/javascript">
  </script>
  <!-- javascript END -->
  <link href="//s0.wp.com" rel="dns-prefetch"/>
  <link href="//s.gravatar.com" rel="dns-prefetch"/>
  <link href="//s.w.org" rel="dns-prefetch"/>
  <script type="text/javascript">
   window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/www.walkingrandomly.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.6.11"}};
			!function(a,b,c){function d(a){var c,d,e,f,g,h=b.createElement("canvas"),i=h.getContext&&h.getContext("2d"),j=String.fromCharCode;if(!i||!i.fillText)return!1;switch(i.textBaseline="top",i.font="600 32px Arial",a){case"flag":return i.fillText(j(55356,56806,55356,56826),0,0),!(h.toDataURL().length<3e3)&&(i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,65039,8205,55356,57096),0,0),c=h.toDataURL(),i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,55356,57096),0,0),d=h.toDataURL(),c!==d);case"diversity":return i.fillText(j(55356,57221),0,0),e=i.getImageData(16,16,1,1).data,f=e[0]+","+e[1]+","+e[2]+","+e[3],i.fillText(j(55356,57221,55356,57343),0,0),e=i.getImageData(16,16,1,1).data,g=e[0]+","+e[1]+","+e[2]+","+e[3],f!==g;case"simple":return i.fillText(j(55357,56835),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode8":return i.fillText(j(55356,57135),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode9":return i.fillText(j(55358,56631),0,0),0!==i.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i;for(i=Array("simple","flag","unicode8","diversity","unicode9"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
  </script>
  <style type="text/css">
   img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
  </style>
  <link href="http://www.walkingrandomly.com/wp-content/plugins/wp-quicklatex/css/quicklatex-format.css?ver=4.6.11" id="wp-quicklatex-format-css" media="all" rel="stylesheet" type="text/css"/>
  <link href="http://www.walkingrandomly.com/wp-content/themes/elegant-box/wp-syntax.css?ver=1.1" id="wp-syntax-css-css" media="all" rel="stylesheet" type="text/css"/>
  <link href="http://www.walkingrandomly.com/wp-content/plugins/jetpack/_inc/social-logos/social-logos.min.css?ver=1" id="social-logos-css" media="all" rel="stylesheet" type="text/css"/>
  <link href="http://www.walkingrandomly.com/wp-content/plugins/jetpack/css/jetpack.css?ver=4.7.1" id="jetpack_css-css" media="all" rel="stylesheet" type="text/css"/>
  <script src="http://www.walkingrandomly.com/wp-includes/js/jquery/jquery.js?ver=1.12.4" type="text/javascript">
  </script>
  <script src="http://www.walkingrandomly.com/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1" type="text/javascript">
  </script>
  <script src="http://www.walkingrandomly.com/wp-content/plugins/wp-quicklatex/js/wp-quicklatex-frontend.js?ver=1.0" type="text/javascript">
  </script>
  <link href="http://www.walkingrandomly.com/?rest_route=/" rel="https://api.w.org/"/>
  <link href="http://www.walkingrandomly.com/xmlrpc.php?rsd" rel="EditURI" title="RSD" type="application/rsd+xml"/>
  <link href="http://www.walkingrandomly.com/wp-includes/wlwmanifest.xml" rel="wlwmanifest" type="application/wlwmanifest+xml"/>
  <meta content="WordPress 4.6.11" name="generator"/>
  <link href="http://wp.me/3swhs" rel="shortlink"/>
  <style data-context="foundation-flickity-css">
   /*! Flickity v2.0.2
http://flickity.metafizzy.co
---------------------------------------------- */.flickity-enabled{position:relative}.flickity-enabled:focus{outline:0}.flickity-viewport{overflow:hidden;position:relative;height:100%}.flickity-slider{position:absolute;width:100%;height:100%}.flickity-enabled.is-draggable{-webkit-tap-highlight-color:transparent;tap-highlight-color:transparent;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.flickity-enabled.is-draggable .flickity-viewport{cursor:move;cursor:-webkit-grab;cursor:grab}.flickity-enabled.is-draggable .flickity-viewport.is-pointer-down{cursor:-webkit-grabbing;cursor:grabbing}.flickity-prev-next-button{position:absolute;top:50%;width:44px;height:44px;border:none;border-radius:50%;background:#fff;background:hsla(0,0%,100%,.75);cursor:pointer;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.flickity-prev-next-button:hover{background:#fff}.flickity-prev-next-button:focus{outline:0;box-shadow:0 0 0 5px #09F}.flickity-prev-next-button:active{opacity:.6}.flickity-prev-next-button.previous{left:10px}.flickity-prev-next-button.next{right:10px}.flickity-rtl .flickity-prev-next-button.previous{left:auto;right:10px}.flickity-rtl .flickity-prev-next-button.next{right:auto;left:10px}.flickity-prev-next-button:disabled{opacity:.3;cursor:auto}.flickity-prev-next-button svg{position:absolute;left:20%;top:20%;width:60%;height:60%}.flickity-prev-next-button .arrow{fill:#333}.flickity-page-dots{position:absolute;width:100%;bottom:-25px;padding:0;margin:0;list-style:none;text-align:center;line-height:1}.flickity-rtl .flickity-page-dots{direction:rtl}.flickity-page-dots .dot{display:inline-block;width:10px;height:10px;margin:0 8px;background:#333;border-radius:50%;opacity:.25;cursor:pointer}.flickity-page-dots .dot.is-selected{opacity:1}
  </style>
  <style data-context="foundation-slideout-css">
   .slideout-menu{position:fixed;left:0;top:0;bottom:0;right:auto;z-index:0;width:256px;overflow-y:auto;-webkit-overflow-scrolling:touch;display:none}.slideout-menu.pushit-right{left:auto;right:0}.slideout-panel{position:relative;z-index:1;will-change:transform}.slideout-open,.slideout-open .slideout-panel,.slideout-open body{overflow:hidden}.slideout-open .slideout-menu{display:block}.pushit{display:none}
  </style>
  <link href="//v0.wordpress.com" rel="dns-prefetch"/>
  <link href="//jetpack.wordpress.com" rel="dns-prefetch"/>
  <link href="//s0.wp.com" rel="dns-prefetch"/>
  <link href="//s1.wp.com" rel="dns-prefetch"/>
  <link href="//s2.wp.com" rel="dns-prefetch"/>
  <link href="//public-api.wordpress.com" rel="dns-prefetch"/>
  <link href="//0.gravatar.com" rel="dns-prefetch"/>
  <link href="//1.gravatar.com" rel="dns-prefetch"/>
  <link href="//2.gravatar.com" rel="dns-prefetch"/>
  <!-- Jetpack Open Graph Tags -->
  <meta content="website" property="og:type"/>
  <meta content="Walking Randomly" property="og:title"/>
  <meta content="Because it's more fun than getting there in a straight line." property="og:description"/>
  <meta content="http://www.walkingrandomly.com/" property="og:url"/>
  <meta content="Walking Randomly" property="og:site_name"/>
  <meta content="https://s0.wp.com/i/blank.jpg" property="og:image"/>
  <meta content="en_US" property="og:locale"/>
  <style>
   .ios7.web-app-mode.has-fixed header{ background-color: rgba(3,122,221,.88);}
  </style>
 </head>
 <body>
  <!-- header START -->
  <div id="header">
   <div class="inner">
    <div class="content">
     <div class="caption">
      <h1 id="title">
       <a href="http://www.walkingrandomly.com/" title="Because it’s more fun than getting there in a straight line.">
        Walking Randomly
       </a>
      </h1>
      <div id="tagline">
       Because it’s more fun than getting there in a straight line.
      </div>
     </div>
     <!-- search box -->
     <form action="http://www.walkingrandomly.com/" id="search_box" method="get">
      <div id="searchbox">
       <input class="textfield" id="searchtxt" name="s" type="text" value=""/>
      </div>
     </form>
     <script type="text/javascript">
      //<![CDATA[
	var searchbox = document.getElementById("searchbox");
	var searchtxt = document.getElementById("searchtxt");
	var tiptext = "Type text to search here...";
	if(searchtxt.value == "" || searchtxt.value == tiptext) {
		searchtxt.className += " searchtip";
		searchtxt.value = tiptext;
	}
	searchtxt.onfocus = function(e) {
		if(searchtxt.value == tiptext) {
			searchtxt.value = "";
			searchtxt.className = searchtxt.className.replace(" searchtip", "");
		}
	}
	searchtxt.onblur = function(e) {
		if(searchtxt.value == "") {
			searchtxt.className += " searchtip";
			searchtxt.value = tiptext;
		}
	}
//]]>
     </script>
     <!-- navigation START -->
     <ul id="navigation">
      <li class="current_page_item">
       <a href="http://www.walkingrandomly.com/">
        Home
       </a>
      </li>
      <li class="page_item page-item-2">
       <a href="http://www.walkingrandomly.com/?page_id=2">
        About Me
       </a>
      </li>
      <li class="page_item page-item-502">
       <a href="http://www.walkingrandomly.com/?page_id=502">
        Highlights
       </a>
      </li>
      <li class="page_item page-item-2055">
       <a href="http://www.walkingrandomly.com/?page_id=2055">
        Contact
       </a>
      </li>
      <li class="page_item page-item-5122">
       <a href="http://www.walkingrandomly.com/?page_id=5122">
        Testimonials
       </a>
      </li>
      <li>
       <a href="http://twitter.com/WalkingRandomly/" id="twitter" rel="external nofollow" title="Follow me!">
        <img alt="Twitter" src="http://www.walkingrandomly.com/wp-content/themes/elegant-box/images/transparent.gif"/>
       </a>
      </li>
      <li id="subscribe">
       <a href="http://feeds.feedburner.com/WalkingRandomly" id="feed" rel="external nofollow" title="Subscribe to this blog...">
        <img alt="RSS feed" src="http://www.walkingrandomly.com/wp-content/themes/elegant-box/images/transparent.gif"/>
       </a>
      </li>
     </ul>
     <!-- navigation END -->
    </div>
   </div>
  </div>
  <!-- header END -->
  <div id="container">
   <div id="content">
    <div id="main">
     <div class="post">
      <div class="title">
       <h2>
        <a href="http://www.walkingrandomly.com/?p=6453" rel="bookmark">
         String sorting in R appears to use different ordering from everyone else
        </a>
       </h2>
       <div class="fixed">
       </div>
      </div>
      <div class="info">
       <span>
        April 12th, 2018
       </span>
       <span>
        | Categories:
        <a href="http://www.walkingrandomly.com/?cat=65" rel="category">
         C/C++
        </a>
        ,
        <a href="http://www.walkingrandomly.com/?cat=11" rel="category">
         matlab
        </a>
        ,
        <a href="http://www.walkingrandomly.com/?cat=7" rel="category">
         programming
        </a>
        ,
        <a href="http://www.walkingrandomly.com/?cat=31" rel="category">
         python
        </a>
        ,
        <a href="http://www.walkingrandomly.com/?cat=36" rel="category">
         R
        </a>
       </span>
       <span>
        | Tags:
       </span>
       <div class="fixed">
       </div>
      </div>
      <div class="content">
       <p>
        <strong>
         Update
        </strong>
        <br/>
        A
        <a href="https://twitter.com/walkingrandomly/status/984336870485176321">
         discussion on twitter
        </a>
        determined that this was an issue with
        <a href="https://en.wikipedia.org/wiki/Locale_(computer_software)">
         Locales
        </a>
        . The practical upshot is that we can make R act the same way as the others by doing
       </p>
       <pre><code>Sys.setlocale("LC_COLLATE", "C")</code></pre>
       <p>
        which may or may not be what you should do!
       </p>
       <p>
        <strong>
         Original post
        </strong>
       </p>
       <p>
        While working on a project that involves using multiple languages, I noticed some tests failing in one language and not the other. Further investigation revealed that this was essentially because R's default sort order for strings is different from everyone else's.
       </p>
       <p>
        I have no idea how to say to R 'Use the sort order that everyone else is using'. Suggestions welcomed.
       </p>
       <p>
        <strong>
         R 3.3.2
        </strong>
       </p>
       <pre><code>sort(c("#b","-b","-a","#a","a","b"))

[1] "-a" "-b" "#a" "#b" "a" "b"
</code></pre>
       <p>
        <strong>
         Python 3.6
         <br/>
        </strong>
       </p>
       <pre><code>sorted({"#b","-b","-a","#a","a","b"})

['#a', '#b', '-a', '-b', 'a', 'b']
</code></pre>
       <p>
        <br/>
        <strong>
         MATLAB 2018a
        </strong>
       </p>
       <pre><code>sort([{'#b'},{'-b'},{'-a'},{'#a'},{'a'},{'b'}])

ans =
1×6 cell array
{'#a'} {'#b'} {'-a'} {'-b'} {'a'} {'b'}
</code></pre>
       <p>
       </p>
       <p>
        <strong>
         C++
        </strong>
       </p>
       <pre><code>int main(){ 

std::string mystrs[] = {"#b","-b","-a","#a","a","b"}; 
std::vector&lt;std::string&gt; stringarray(mystrs,mystrs+6);
std::vector&lt;std::string&gt;::iterator it; 

std::sort(stringarray.begin(),stringarray.end());

for(it=stringarray.begin(); it!=stringarray.end();++it) {
   std::cout &lt;&lt; *it &lt;&lt; " "; 
} 

return 0;
} 
</code></pre>
       <p>
        Result:
       </p>
       <pre><code>#a #b -a -b a b
</code></pre>
       <div class="sharedaddy sd-sharing-enabled">
        <div class="robots-nocontent sd-block sd-social sd-social-icon sd-sharing">
         <h3 class="sd-title">
          Share this:
         </h3>
         <div class="sd-content">
          <ul>
           <li class="share-twitter">
            <a class="share-twitter sd-button share-icon no-text" data-shared="sharing-twitter-6453" href="http://www.walkingrandomly.com/?p=6453&amp;share=twitter" rel="nofollow" target="_blank" title="Click to share on Twitter">
             <span>
             </span>
             <span class="sharing-screen-reader-text">
              Click to share on Twitter (Opens in new window)
             </span>
            </a>
           </li>
           <li class="share-facebook">
            <a class="share-facebook sd-button share-icon no-text" data-shared="sharing-facebook-6453" href="http://www.walkingrandomly.com/?p=6453&amp;share=facebook" rel="nofollow" target="_blank" title="Click to share on Facebook">
             <span>
             </span>
             <span class="sharing-screen-reader-text">
              Click to share on Facebook (Opens in new window)
             </span>
            </a>
           </li>
           <li class="share-google-plus-1">
            <a class="share-google-plus-1 sd-button share-icon no-text" data-shared="sharing-google-6453" href="http://www.walkingrandomly.com/?p=6453&amp;share=google-plus-1" rel="nofollow" target="_blank" title="Click to share on Google+">
             <span>
             </span>
             <span class="sharing-screen-reader-text">
              Click to share on Google+ (Opens in new window)
             </span>
            </a>
           </li>
           <li class="share-end">
           </li>
          </ul>
         </div>
        </div>
       </div>
       <div class="fixed">
       </div>
      </div>
      <div class="comments">
       <a href="http://www.walkingrandomly.com/?p=6453#respond">
        0 comments
       </a>
      </div>
     </div>
     <div class="post">
      <div class="title">
       <h2>
        <a href="http://www.walkingrandomly.com/?p=6444" rel="bookmark">
         Research Software Engineer: A New Career Track?
        </a>
       </h2>
       <div class="fixed">
       </div>
      </div>
      <div class="info">
       <span>
        March 2nd, 2018
       </span>
       <span>
        | Categories:
        <a href="http://www.walkingrandomly.com/?cat=80" rel="category">
         RSE
        </a>
       </span>
       <span>
        | Tags:
       </span>
       <div class="fixed">
       </div>
      </div>
      <div class="content">
       <p>
        Along with
        <a href="http://www.walkingrandomly.com/?p=6037">
         fellow Fellow
        </a>
        Chris Richardson, we wrote an article over at Siam News about the emerging Research Software Engineering profession.  Head over to
        <a href="https://sinews.siam.org/Details-Page/research-software-engineer-a-new-career-track">
         Research Software Engineer: A New Career Track?
        </a>
        to check it out.
       </p>
       <p>
        If this has whetted your appetite for learning more about Research Software Engineering then feel free to read the
        <a href="http://www.walkingrandomly.com/?p=6347">
         RSE 2017 State of the Nation report
        </a>
        from last year.  Finally, I urge you to join the
        <a href="http://rse.ac.uk/">
         UK RSE association
        </a>
        if you have any interest in this area.
       </p>
       <p>
       </p>
       <div class="sharedaddy sd-sharing-enabled">
        <div class="robots-nocontent sd-block sd-social sd-social-icon sd-sharing">
         <h3 class="sd-title">
          Share this:
         </h3>
         <div class="sd-content">
          <ul>
           <li class="share-twitter">
            <a class="share-twitter sd-button share-icon no-text" data-shared="sharing-twitter-6444" href="http://www.walkingrandomly.com/?p=6444&amp;share=twitter" rel="nofollow" target="_blank" title="Click to share on Twitter">
             <span>
             </span>
             <span class="sharing-screen-reader-text">
              Click to share on Twitter (Opens in new window)
             </span>
            </a>
           </li>
           <li class="share-facebook">
            <a class="share-facebook sd-button share-icon no-text" data-shared="sharing-facebook-6444" href="http://www.walkingrandomly.com/?p=6444&amp;share=facebook" rel="nofollow" target="_blank" title="Click to share on Facebook">
             <span>
             </span>
             <span class="sharing-screen-reader-text">
              Click to share on Facebook (Opens in new window)
             </span>
            </a>
           </li>
           <li class="share-google-plus-1">
            <a class="share-google-plus-1 sd-button share-icon no-text" data-shared="sharing-google-6444" href="http://www.walkingrandomly.com/?p=6444&amp;share=google-plus-1" rel="nofollow" target="_blank" title="Click to share on Google+">
             <span>
             </span>
             <span class="sharing-screen-reader-text">
              Click to share on Google+ (Opens in new window)
             </span>
            </a>
           </li>
           <li class="share-end">
           </li>
          </ul>
         </div>
        </div>
       </div>
       <div class="fixed">
       </div>
      </div>
      <div class="comments">
       <a href="http://www.walkingrandomly.com/?p=6444#comments">
        1 comment
       </a>
      </div>
     </div>
     <div class="post">
      <div class="title">
       <h2>
        <a href="http://www.walkingrandomly.com/?p=6441" rel="bookmark">
         Strange MATLAB performance issue on Microsoft Azure F72s_v2 instances
        </a>
       </h2>
       <div class="fixed">
       </div>
      </div>
      <div class="info">
       <span>
        March 1st, 2018
       </span>
       <span>
        | Categories:
        <a href="http://www.walkingrandomly.com/?cat=86" rel="category">
         Cloud Computing
        </a>
        ,
        <a href="http://www.walkingrandomly.com/?cat=68" rel="category">
         HPC
        </a>
        ,
        <a href="http://www.walkingrandomly.com/?cat=53" rel="category">
         Making MATLAB faster
        </a>
        ,
        <a href="http://www.walkingrandomly.com/?cat=11" rel="category">
         matlab
        </a>
       </span>
       <span>
        | Tags:
       </span>
       <div class="fixed">
       </div>
      </div>
      <div class="content">
       <p>
        I’m working on some MATLAB code at the moment that I’ve managed to reduce down to a bunch of
        <a href="http://www.walkingrandomly.com/?p=1894">
         implicitly parallel functions
        </a>
        . This is nice because the data that we’ll eventually throw at it will be represented as a lot of huge matrices.  As such, I’m expecting that if we throw a lot of cores at it, we’ll get a lot of speed-up.  Preliminary testing on local HPC nodes shows that I’m probably right.
       </p>
       <p>
        During testing and profiling on a smaller data set I thought that it would be fun to run the code on the most powerful single node I can lay my hands on.  In my case that’s an Azure F72s_v2 which I currently get for free thanks to a
        <a href="https://www.microsoft.com/en-us/research/academic-program/microsoft-azure-for-research/">
         Microsoft Azure for Research grant
        </a>
        I won.
       </p>
       <p>
        These Azure F72s_v2 machines are NICE! Running Intel Xeon Platinum 8168 CPUs with 72 virtual cores and 144GB of RAM, they put my Macbook Pro to shame! Theoretically, they should be more powerful than any of the nodes I can access on my University HPC system.
       </p>
       <p>
        So, you can imagine my surprise when
        <strong>
         the production code ran almost 3 times slower than on my Macbook Pro!
        </strong>
       </p>
       <p>
        Here’s a Microbenchmark, extracted from the production code, running on MATLAB 2017b on a few machines to show the kind of slowdown I experienced on these super powerful virtual machines.
       </p>
       <p>
        <code>
         <br/>
         test_t = rand(8755,1);
         <br/>
         test_c = rand(5799,1);
         <br/>
         tic;test_res = bsxfun(@times,test_t,test_c');toc
         <br/>
         tic;test_res = bsxfun(@times,test_t,test_c');toc
         <br/>
        </code>
       </p>
       <p>
        I ran the bsxfun twice and report the fastest since the first call to any function in MATLAB is often slower than subsequent ones for various reasons. This quick and dirty benchmark isn’t exactly rigorous but its good enough to show the issue.
       </p>
       <ul>
        <li>
         Azure F72s_v2 (72 vcpus, 144 GB memory) running Windows Server 2016:
         <strong>
          0.3 seconds
         </strong>
        </li>
        <li>
         Azure F32s_v2 (32 vcpus, 64 GB memory) running Windows Server 2016:
         <strong>
          0.29 seconds
         </strong>
        </li>
        <li>
         2014 Macbook Pro running OS X:
         <strong>
          0.11 seconds
         </strong>
        </li>
        <li>
         Dell XPS 15 9560 laptop running Windows 10:
         <strong>
          0.11 seconds
         </strong>
        </li>
        <li>
         8 cores on a node of Sheffield University’s Linux HPC cluster:
         <strong>
          0.03 seconds
         </strong>
        </li>
        <li>
         16 cores on a node of Sheffield University’s Linux HPC cluster:
         <strong>
          0.015 seconds
         </strong>
        </li>
       </ul>
       <p>
        After a
        <a href="https://twitter.com/walkingrandomly/status/968954560600567809">
         conversation on twitter
        </a>
        , I ran it on Azure twice — once on a 72 vCPU instance and once on a 32 vCPU instance. This was to test if the issue was related to having 2 physical CPUs. The results were pretty much identical.
       </p>
       <p>
        The results from the University HPC cluster are more in line with what I expected to see — faster than a laptop and good scaling with respect to number of cores.  I tried running it on 32 cores but the benchmark is still in the queue ;)
       </p>
       <p>
        <strong>
         What’s going on?
        </strong>
       </p>
       <p>
        I have no idea! I’m stumped to be honest.  Here are some thoughts that occur to me in no particular order
       </p>
       <ul>
        <li>
         Maybe it’s an issue with Windows Server 2016. Is there some environment variable I should have set or security option I could have changed? Maybe the Windows version of MATLAB doesn’t get on well with large core counts? I can only test up to 4 on my own hardware and that’s using Windows 10 rather than Windows server.  I need to repeat the experiment using a Linux guest OS.
        </li>
        <li>
         Is it an issue related to the fact that there isn’t a 1:1 mapping between physical hardware and virtual cores? Intel Xeon Platinum 8168 CPUs have 24 cores giving 48 hyperthreads so two of them would give me 48 cores and 96 hyperthreads.  They appear to the virtualised OS as 2 x 18 core CPUs with 72 hyperthreads in total.   Does this matter in any way?
        </li>
       </ul>
       <p>
       </p>
       <div class="sharedaddy sd-sharing-enabled">
        <div class="robots-nocontent sd-block sd-social sd-social-icon sd-sharing">
         <h3 class="sd-title">
          Share this:
         </h3>
         <div class="sd-content">
          <ul>
           <li class="share-twitter">
            <a class="share-twitter sd-button share-icon no-text" data-shared="sharing-twitter-6441" href="http://www.walkingrandomly.com/?p=6441&amp;share=twitter" rel="nofollow" target="_blank" title="Click to share on Twitter">
             <span>
             </span>
             <span class="sharing-screen-reader-text">
              Click to share on Twitter (Opens in new window)
             </span>
            </a>
           </li>
           <li class="share-facebook">
            <a class="share-facebook sd-button share-icon no-text" data-shared="sharing-facebook-6441" href="http://www.walkingrandomly.com/?p=6441&amp;share=facebook" rel="nofollow" target="_blank" title="Click to share on Facebook">
             <span>
             </span>
             <span class="sharing-screen-reader-text">
              Click to share on Facebook (Opens in new window)
             </span>
            </a>
           </li>
           <li class="share-google-plus-1">
            <a class="share-google-plus-1 sd-button share-icon no-text" data-shared="sharing-google-6441" href="http://www.walkingrandomly.com/?p=6441&amp;share=google-plus-1" rel="nofollow" target="_blank" title="Click to share on Google+">
             <span>
             </span>
             <span class="sharing-screen-reader-text">
              Click to share on Google+ (Opens in new window)
             </span>
            </a>
           </li>
           <li class="share-end">
           </li>
          </ul>
         </div>
        </div>
       </div>
       <div class="fixed">
       </div>
      </div>
      <div class="comments">
       <a href="http://www.walkingrandomly.com/?p=6441#respond">
        0 comments
       </a>
      </div>
     </div>
     <div class="post">
      <div class="title">
       <h2>
        <a href="http://www.walkingrandomly.com/?p=6431" rel="bookmark">
         Creating a temporary, customised, multi-user HPC cluster for teaching using Amazon AWS and Alces Flight
        </a>
       </h2>
       <div class="fixed">
       </div>
      </div>
      <div class="info">
       <span>
        February 21st, 2018
       </span>
       <span>
        | Categories:
        <a href="http://www.walkingrandomly.com/?cat=86" rel="category">
         Cloud Computing
        </a>
        ,
        <a href="http://www.walkingrandomly.com/?cat=68" rel="category">
         HPC
        </a>
       </span>
       <span>
        | Tags:
       </span>
       <div class="fixed">
       </div>
      </div>
      <div class="content">
       <p>
        In a
        <a href="http://www.walkingrandomly.com/?p=6392">
         previous blog post
        </a>
        , I told the story of how I used Amazon AWS and
        <a href="https://alces-flight.com/">
         AlcesFlight
        </a>
        to create a temporary multi-user HPC cluster for use in a training course.  Here are the details of how I actually did it.
       </p>
       <p>
        Note that I have only ever used this configuration as a training cluster.  I am not suggesting that the customisations are suitable for real work.
       </p>
       <p>
        <strong>
         Before you start
        </strong>
       </p>
       <p>
        Before attempting to use AlcesFlight on AWS, I suggest that you ensure that you have the following things working
       </p>
       <ul>
        <li>
         A working AWS account.  Ensure that you can create an
         <a href="https://aws.amazon.com/getting-started/tutorials/launch-a-virtual-machine/">
          EC2 virtual machine
         </a>
         and connect to it via ssh.
        </li>
        <li>
         Get the
         <a href="https://aws.amazon.com/cli/">
          AWS Command Line Interface
         </a>
         working.
        </li>
       </ul>
       <p>
        <strong>
         Customizing the HPC cluster on AWS
        </strong>
       </p>
       <p>
        AlcesFlight provides a CloudFormation template for launching cluster instances on Amazon AWS.  The practical upshot of this is that you answer a bunch of questions on a web form to customise your cluster and then you launch it.
       </p>
       <p>
        We are going to use this CloudFormation template along with some bash scripts that provide additional customisation.
       </p>
       <p>
        <strong>
         Get the customisation scripts
        </strong>
       </p>
       <p>
        The first step is to get some customization scripts in an S3 bucket. You could use your own or you could use the ones I created.
       </p>
       <p>
        If you use mine, make sure you take a good look at them first to make sure you are happy with what I’ve done!  It’s probably worth using your own fork of my repo so you can customise your cluster further.
       </p>
       <p>
        It’s the bash scripts that allow the creation of a bunch of user accounts for trainees with randomized passwords.  My scripts do some other things too and I’ve listed everything in the
        <a href="https://github.com/mikecroucher/alces_flight_customisation/blob/master/README.md">
         github README.md
        </a>
        .
        <br/>
        <code>
         <br/>
         git clone https://github.com/mikecroucher/alces_flight_customisation
         <br/>
         cd alces_flight_customisation
         <br/>
        </code>
       </p>
       <p>
        Now you need to upload these to an s3 bucket. I called mine
        <strong>
         walkingrandomly-aws-cluster
        </strong>
        <br/>
        <code>
         <br/>
         aws s3api create-bucket --bucket walkingrandomly-aws-cluster --region eu-west-2 --create-bucket-configuration LocationConstraint=eu-west-2
         <br/>
         aws s3 sync . s3://walkingrandomly-aws-cluster --delete
         <br/>
        </code>
       </p>
       <p>
        <strong>
         Set up the CloudFormation template
        </strong>
       </p>
       <ul>
        <li>
         Head over to
         <a href="https://aws.amazon.com/marketplace/pp/B01GC9E3OG?qid=1518562867216&amp;amp;sr=0-1&amp;amp;ref_=srh_res_product_title">
          Alces Flight Solo (Community Edition)
         </a>
         and click on
         <strong>
          continue to subscribe
         </strong>
        </li>
        <li>
         Choose the region you want to create the cluster in, select
         <strong>
          Personal HPC compute
         </strong>
         <strong>
          cluster
         </strong>
         and click on
         <strong>
          Launch with CloudFormationConsole
         </strong>
        </li>
       </ul>
       <p>
        <a href="http://www.walkingrandomly.com/wp-content/uploads/2018/02/personal_hpc_compute_cluster.png">
         <img alt="personal_hpc_compute_cluster" class="alignnone size-medium wp-image-6428" height="265" sizes="(max-width: 300px) 100vw, 300px" src="http://www.walkingrandomly.com/wp-content/uploads/2018/02/personal_hpc_compute_cluster-300x265.png" srcset="http://www.walkingrandomly.com/wp-content/uploads/2018/02/personal_hpc_compute_cluster-300x265.png 300w, http://www.walkingrandomly.com/wp-content/uploads/2018/02/personal_hpc_compute_cluster-768x678.png 768w, http://www.walkingrandomly.com/wp-content/uploads/2018/02/personal_hpc_compute_cluster-1024x904.png 1024w, http://www.walkingrandomly.com/wp-content/uploads/2018/02/personal_hpc_compute_cluster.png 1307w" width="300"/>
        </a>
       </p>
       <ul>
        <li>
         Go through the CloudFormation template screens, creating the cluster as you want it until you get to the
         <strong>
          S3 bubcket for customization profiles
         </strong>
         box where you fill in the name of the S3 bucket you created earlier.
        </li>
        <li>
         Enable the default profile
        </li>
       </ul>
       <p>
        <a href="http://www.walkingrandomly.com/wp-content/uploads/2018/02/flight_customisation.png">
         <img alt="flight_customisation" class="alignnone size-medium wp-image-6429" height="90" sizes="(max-width: 300px) 100vw, 300px" src="http://www.walkingrandomly.com/wp-content/uploads/2018/02/flight_customisation-300x90.png" srcset="http://www.walkingrandomly.com/wp-content/uploads/2018/02/flight_customisation-300x90.png 300w, http://www.walkingrandomly.com/wp-content/uploads/2018/02/flight_customisation-768x230.png 768w, http://www.walkingrandomly.com/wp-content/uploads/2018/02/flight_customisation-1024x307.png 1024w, http://www.walkingrandomly.com/wp-content/uploads/2018/02/flight_customisation.png 1129w" width="300"/>
        </a>
       </p>
       <ul>
        <li>
         Continue answering the questions asked by the web form.  For this simple training cluster, I just accepted all of the defaults and it worked fine
        </li>
       </ul>
       <p>
        When the CloudFormation stack has been fully created, you can log into your new cluster as an administrator.  To get the connection details of the headnode, go to the
        <strong>
         EC2 management console
        </strong>
        in your web-browser,
        <strong>
        </strong>
        select the headnode and click on
        <strong>
         Connect.
        </strong>
       </p>
       <p>
        When you log in to the cluster as administrator, the usernames and passwords for your training cohort will be in directory specified by the password_file
        <a href="https://github.com/mikecroucher/alces_flight_customisation/blob/master/customizer/default/configure.d/run_me.sh">
         variable in the configure.d/run_me.sh script
        </a>
        . I set my administrator account to be called walkingrandomly and so put the password file in /home/walkingrandomly/users.txt.  I could then print this out and distribute the usernames and passwords to each training delegate.
       </p>
       <p>
        This is probably not great sysadmin practice but worked on the day.  If anyone can come up with a better way,
        <a href="https://github.com/mikecroucher/alces_flight_customisation">
         Pull Requests are welcomed
        </a>
        !
       </p>
       <p>
        <a href="http://www.walkingrandomly.com/wp-content/uploads/2018/02/alces_flight_login.png">
         <img alt="alces_flight_login" class="alignnone size-large wp-image-6435" height="696" sizes="(max-width: 1024px) 100vw, 1024px" src="http://www.walkingrandomly.com/wp-content/uploads/2018/02/alces_flight_login-1024x696.png" srcset="http://www.walkingrandomly.com/wp-content/uploads/2018/02/alces_flight_login-1024x696.png 1024w, http://www.walkingrandomly.com/wp-content/uploads/2018/02/alces_flight_login-300x204.png 300w, http://www.walkingrandomly.com/wp-content/uploads/2018/02/alces_flight_login-768x522.png 768w" width="1024"/>
        </a>
       </p>
       <p>
        <strong>
         Try a training account
        </strong>
       </p>
       <p>
        At this point, I suggest that you try logging in as one of the training user accounts and make sure you can successfully submit a job.  When I first tried all of this, the default scheduler on the created cluster was SunGridEngine and my first attempt at customisation left me with user accounts that couldn’t submit jobs.
       </p>
       <p>
        The current scripts have been battle tested with Sun Grid Engine, including MPI job submission and I’ve also done a very basic test with Slurm. However, you really should check that a user account can submit all of the types of job you expect to use in class.
       </p>
       <p>
        <strong>
         Troubleshooting
        </strong>
       </p>
       <p>
        When I first tried to do this, things didn’t go completely smoothly.  Here are some things I learned to help diagnose the problems
       </p>
       <p>
        Full documentation is available at
        <a href="http://docs.alces-flight.com/en/stable/customisation/customisation.html">
         http://docs.alces-flight.com/en/stable/customisation/customisation.html
        </a>
       </p>
       <p>
        On the cluster, we can see where its looking for its customisation scripts with the
        <strong>
         alces about
        </strong>
        command
       </p>
       <p>
        <code>
         <br/>
         alces about customizer
         <br/>
         Customizer bucket prefix: s3://walkingrandomly-aws-cluster/customizer
         <br/>
        </code>
       </p>
       <p>
        The log file at
        <strong>
         /var/log/clusterware/instance.log
        </strong>
        on both the head node and worker nodes is very useful.
       </p>
       <p>
        Once, I did all of this using a Windows CMD bash prompt and the customisation scripts failed to run.  The logs showed this error
        <br/>
        <code>
         <br/>
         /bin/bash^M: bad interpreter: No such file or directory
        </code>
       </p>
       <p>
        This is a classic
        <a href="http://www.walkingrandomly.com/?p=9">
         dos2unix error
        </a>
        and could be avoided, for example, by using the
        <a href="https://docs.microsoft.com/en-us/windows/wsl/install-win10">
         Windows Subsystem for linux
        </a>
        instead of CMD.exe.
       </p>
       <div class="sharedaddy sd-sharing-enabled">
        <div class="robots-nocontent sd-block sd-social sd-social-icon sd-sharing">
         <h3 class="sd-title">
          Share this:
         </h3>
         <div class="sd-content">
          <ul>
           <li class="share-twitter">
            <a class="share-twitter sd-button share-icon no-text" data-shared="sharing-twitter-6431" href="http://www.walkingrandomly.com/?p=6431&amp;share=twitter" rel="nofollow" target="_blank" title="Click to share on Twitter">
             <span>
             </span>
             <span class="sharing-screen-reader-text">
              Click to share on Twitter (Opens in new window)
             </span>
            </a>
           </li>
           <li class="share-facebook">
            <a class="share-facebook sd-button share-icon no-text" data-shared="sharing-facebook-6431" href="http://www.walkingrandomly.com/?p=6431&amp;share=facebook" rel="nofollow" target="_blank" title="Click to share on Facebook">
             <span>
             </span>
             <span class="sharing-screen-reader-text">
              Click to share on Facebook (Opens in new window)
             </span>
            </a>
           </li>
           <li class="share-google-plus-1">
            <a class="share-google-plus-1 sd-button share-icon no-text" data-shared="sharing-google-6431" href="http://www.walkingrandomly.com/?p=6431&amp;share=google-plus-1" rel="nofollow" target="_blank" title="Click to share on Google+">
             <span>
             </span>
             <span class="sharing-screen-reader-text">
              Click to share on Google+ (Opens in new window)
             </span>
            </a>
           </li>
           <li class="share-end">
           </li>
          </ul>
         </div>
        </div>
       </div>
       <div class="fixed">
       </div>
      </div>
      <div class="comments">
       <a href="http://www.walkingrandomly.com/?p=6431#respond">
        0 comments
       </a>
      </div>
     </div>
     <div class="post">
      <div class="title">
       <h2>
        <a href="http://www.walkingrandomly.com/?p=6392" rel="bookmark">
         Bespoke High Performance Computing Clusters in the Cloud with Alces Flight
        </a>
       </h2>
       <div class="fixed">
       </div>
      </div>
      <div class="info">
       <span>
        February 21st, 2018
       </span>
       <span>
        | Categories:
        <a href="http://www.walkingrandomly.com/?cat=86" rel="category">
         Cloud Computing
        </a>
        ,
        <a href="http://www.walkingrandomly.com/?cat=68" rel="category">
         HPC
        </a>
       </span>
       <span>
        | Tags:
       </span>
       <div class="fixed">
       </div>
      </div>
      <div class="content">
       <p>
        <strong>
         I needed a supercomputer…..quickly!
        </strong>
       </p>
       <p>
        One of the things that we do in
        <a href="http://rse.shef.ac.uk/">
         Sheffield’s Research Software Engineering Group
        </a>
        is host training courses delivered by external providers.  One such course is on parallel programming using
        <a href="https://www.open-mpi.org/">
         MPI
        </a>
        for which we turn to the experts at NAG (
        <a href="https://nag.co.uk/">
         Numerical Algorithms Group
        </a>
        ).  A few days before turning up to deliver the course, the trainer got in touch with me to ask for details about our HPC cluster.
       </p>
       <p>
        Because
        <a href="https://twitter.com/lawrennd/status/646978856524587008">
         Croucher’s law
        </a>
        , I had forgotten to let our HPC sysadmin know that I’d need a bunch of training accounts and around 128 cores set-aside for us to play around with for a couple of days.
       </p>
       <p>
        In other words, I was hosting a supercomputing course and had forgotten the supercomputer.
       </p>
       <p>
        <strong>
         Building a HPC cluster in the cloud
        </strong>
       </p>
       <p>
        <a href="http://alces-flight.com/">
         AlcesFlight
        </a>
        is a relatively new product that allows you to spin up a traditional-looking High Performance Computing cluster on cloud computing substrates such as
        <a href="https://azure.microsoft.com/en-gb/">
         Microsoft Azure
        </a>
        or
        <a href="https://aws.amazon.com/ec2/">
         Amazon AWS
        </a>
        .  You get a head node, a bunch of worker nodes and a job scheduler such as
        <a href="https://slurm.schedmd.com/">
         Slurm
        </a>
        or
        <a href="https://en.wikipedia.org/wiki/Oracle_Grid_Engine">
         Sun Grid Engine
        </a>
        . It looks just the systems that
        <a href="http://docs.hpc.shef.ac.uk/en/latest/index.html">
         The University of Sheffield provides for its researchers
        </a>
        !
       </p>
       <p>
        You also get lots of nice features such as the ability to scale the number of worker nodes according to demand, a metric ton of available applications and the ability to customise the cluster at start up.
       </p>
       <p>
        <strong>
         The supercomputing budget was less than the coffee budget
        </strong>
       </p>
       <p>
        <strong>
         …and I only bought coffee for myself and the two trainers over the two days!
        </strong>
        The attendees had to buy their own (In my defence…the course was free for attendees!).
       </p>
       <p>
        I used the following
       </p>
       <ul>
        <li>
         A head node of:  t2.large (2 vCPUs, 8Gb RAM)
        </li>
        <li>
         Initial worker nodes: 4 of c4.4xlarge (16 vCPUs and 30GB RAM each)
        </li>
        <li>
         Maximum worker nodes: 8 of c4.4xlarge (16 vCPUs and 30GB RAM each)
        </li>
       </ul>
       <p>
        This gave me a cluster with between 64 and 128 virtual cores depending on the amount that the class were using it.  Much of the time, only 4 nodes were up and running – the others spun up automatically when the class needed them and vanished when they hadn’t been used for a while.
       </p>
       <p>
        I was using the EU (Ireland) region and the prices at the time were
       </p>
       <ul>
        <li>
         Head node: On demand pricing of $0.101 per hour
        </li>
        <li>
         Worker nodes: $0.24 (ish) using spot pricing. Each one about twice as powerful as a 2014 Macbook Pro
         <a href="https://github.com/mikecroucher/Jupyter-Matrix-Matrix/blob/master/results/c4.4xlarge.ipynb">
          according to this benchmark
         </a>
         .
        </li>
       </ul>
       <p>
        <strong>
         HPC cost:
        </strong>
        As such, the maximum cost of this cluster was $2.73 per hour when all nodes were up and running. The class ran from 10am to 5pm for two days so we needed it for 14 hours.  Maximum cost would have been $38.22.
       </p>
       <p>
        <strong>
         Coffee cost:
        </strong>
        2 instructors and me needed coffee twice a day. So that’s 12 coffees in total.  Around £2.50 or $3.37 per coffee so $40.44
       </p>
       <p>
        The HPC cost was probably less than that since we didn’t use 128 cores all the time and the coffee probably cost a little more.
       </p>
       <p>
        <strong>
         Setting up the cluster
        </strong>
       </p>
       <p>
        Technical details of how I configured the cluster can be found in the follow up post at
        <a href="http://www.walkingrandomly.com/?p=6431">
         http://www.walkingrandomly.com/?p=6431
        </a>
       </p>
       <p>
       </p>
       <div class="sharedaddy sd-sharing-enabled">
        <div class="robots-nocontent sd-block sd-social sd-social-icon sd-sharing">
         <h3 class="sd-title">
          Share this:
         </h3>
         <div class="sd-content">
          <ul>
           <li class="share-twitter">
            <a class="share-twitter sd-button share-icon no-text" data-shared="sharing-twitter-6392" href="http://www.walkingrandomly.com/?p=6392&amp;share=twitter" rel="nofollow" target="_blank" title="Click to share on Twitter">
             <span>
             </span>
             <span class="sharing-screen-reader-text">
              Click to share on Twitter (Opens in new window)
             </span>
            </a>
           </li>
           <li class="share-facebook">
            <a class="share-facebook sd-button share-icon no-text" data-shared="sharing-facebook-6392" href="http://www.walkingrandomly.com/?p=6392&amp;share=facebook" rel="nofollow" target="_blank" title="Click to share on Facebook">
             <span>
             </span>
             <span class="sharing-screen-reader-text">
              Click to share on Facebook (Opens in new window)
             </span>
            </a>
           </li>
           <li class="share-google-plus-1">
            <a class="share-google-plus-1 sd-button share-icon no-text" data-shared="sharing-google-6392" href="http://www.walkingrandomly.com/?p=6392&amp;share=google-plus-1" rel="nofollow" target="_blank" title="Click to share on Google+">
             <span>
             </span>
             <span class="sharing-screen-reader-text">
              Click to share on Google+ (Opens in new window)
             </span>
            </a>
           </li>
           <li class="share-end">
           </li>
          </ul>
         </div>
        </div>
       </div>
       <div class="fixed">
       </div>
      </div>
      <div class="comments">
       <a href="http://www.walkingrandomly.com/?p=6392#respond">
        0 comments
       </a>
      </div>
     </div>
     <div class="post">
      <div class="title">
       <h2>
        <a href="http://www.walkingrandomly.com/?p=6411" rel="bookmark">
         Meltdown, Spectre and High Performance Computing
        </a>
       </h2>
       <div class="fixed">
       </div>
      </div>
      <div class="info">
       <span>
        February 10th, 2018
       </span>
       <span>
        | Categories:
        <a href="http://www.walkingrandomly.com/?cat=86" rel="category">
         Cloud Computing
        </a>
        ,
        <a href="http://www.walkingrandomly.com/?cat=68" rel="category">
         HPC
        </a>
        ,
        <a href="http://www.walkingrandomly.com/?cat=41" rel="category">
         parallel programming
        </a>
       </span>
       <span>
        | Tags:
       </span>
       <div class="fixed">
       </div>
      </div>
      <div class="content">
       <p>
        The
        <a href="https://en.wikipedia.org/wiki/Meltdown_(security_vulnerability)">
         Meltdown bug
        </a>
        which affects most modern CPUs has been called by some
        <a href="https://www.theguardian.com/technology/2018/jan/04/meltdown-spectre-worst-cpu-bugs-ever-found-affect-computers-intel-processors-security-flaw">
         ‘The worst ever CPU bug’
        </a>
        . Accessible explanations about what the Meltdown bug actually is are available
        <a href="https://www.facebook.com/Ozzard/posts/10157151940878975">
         here
        </a>
        and
        <a href="https://www.raspberrypi.org/blog/why-raspberry-pi-isnt-vulnerable-to-spectre-or-meltdown/">
         here
        </a>
        .
       </p>
       <p>
        Software patches have been made available but some people have estimated a performance hit of up to 30% in some cases. Some of us in the High Performance Computing (HPC) community (See
        <a href="https://twitter.com/walkingrandomly/status/949230133243768835">
         here for the initial twitter conversation
        </a>
        ) started to wonder what this might mean for the type of workloads that run on our systems. After all, if the worst case scenario of 30% is the norm, it will drastically affect the power of our systems and hence reduce the amount of science we are able to support.
       </p>
       <p>
        In the video below, Professor Mark Handley from University College London gives a detailed explanation of both Meltdown and Spectre at an event held at
        <a href="https://www.turing.ac.uk/">
         Alan Turing Institute
        </a>
        in London.
       </p>
       <p>
        <iframe allowfullscreen="allowfullscreen" frameborder="0" height="315" src="https://www.youtube.com/embed/m66EAgRMmi8" width="560">
        </iframe>
       </p>
       <p>
        Another video that gives a great introduction to this topic was given by Jon Masters at
        <a href="https://fosdem.org/2018/schedule/event/closing_keynote/">
         https://fosdem.org/2018/schedule/event/closing_keynote/
        </a>
       </p>
       <p>
        <strong>
         To patch or not to patch
        </strong>
       </p>
       <p>
        To a first approximation, a patch causing a 30% performance hit on a system costing £1 million pounds is going to cost an equivalent of £300,000 — not exactly small change! This has led to some people wondering if we should patch HPC systems at all:
       </p>
       <blockquote class="twitter-tweet" data-lang="en">
        <p dir="ltr" lang="en">
         Given the size of the performance hit should we even *be* patching for this? Unless you need trusted computing, does it really matter for the average HPC?
        </p>
        <p>
         — Phil Tooley (@acceleratedsci)
         <a href="https://twitter.com/acceleratedsci/status/949233180451713024?ref_src=twsrc%5Etfw">
          January 5, 2018
         </a>
        </p>
       </blockquote>
       <p>
        <script async="" charset="utf-8" src="https://platform.twitter.com/widgets.js">
        </script>
       </p>
       <p>
        All of the UK Tier-3 HPC centres I’m aware of have applied the patches (Sheffield, Leeds and Manchester) but I’d be interested to learn of centres that decided not to.  Feel free to comment here or
        <a href="https://twitter.com/walkingrandomly">
         message me on twitter
        </a>
        if you have something to add to this discussion and I’ll update this post where appropriate.
       </p>
       <p>
        <strong>
         Research paper discussing the performance penalties of these patches on HPC workloads
        </strong>
       </p>
       <p>
        A group of people have written a paper on Arxiv that looks at HPC performance penalties in more detail.  From the paper’s abstract:
       </p>
       <blockquote class="">
        <div class="">
         <div class="">
          The results show that although some specific functions can have execution times decreased by as much as 74%, the majority of individual metrics indicates little to no decrease in performance. The real-world applications show a 2-3% decrease in performance for single node jobs and a 5-11% decrease for parallel multi node jobs.
         </div>
        </div>
       </blockquote>
       <div class="">
        The full pdf is available at
        <a href="https://arxiv.org/abs/1801.04329">
         https://arxiv.org/abs/1801.04329
        </a>
       </div>
       <p>
       </p>
       <p>
        <strong>
         Other relevant results and benchmarks
        </strong>
       </p>
       <p>
        Here are a few other links that discuss the performance penalty of applying the Meltdown patch.
       </p>
       <ul>
        <li>
         <a href="https://access.redhat.com/articles/3307751">
          Redhat’s experiments
         </a>
         showing worst-case performance drops of 19% in certain benchmarks.
        </li>
        <li>
         <a href="https://en.wikipedia.org/wiki/Kernel_page-table_isolation#Implementation">
          Wikipedia article
         </a>
         showing a summary of various benchmarks.
        </li>
       </ul>
       <p>
        <strong>
         Acknowledgements
        </strong>
       </p>
       <p>
        Thanks to Adrian Jackson, Phil Tooley, Filippo Spiga and members of the UK HPC-SIG for useful discussions.
       </p>
       <div class="sharedaddy sd-sharing-enabled">
        <div class="robots-nocontent sd-block sd-social sd-social-icon sd-sharing">
         <h3 class="sd-title">
          Share this:
         </h3>
         <div class="sd-content">
          <ul>
           <li class="share-twitter">
            <a class="share-twitter sd-button share-icon no-text" data-shared="sharing-twitter-6411" href="http://www.walkingrandomly.com/?p=6411&amp;share=twitter" rel="nofollow" target="_blank" title="Click to share on Twitter">
             <span>
             </span>
             <span class="sharing-screen-reader-text">
              Click to share on Twitter (Opens in new window)
             </span>
            </a>
           </li>
           <li class="share-facebook">
            <a class="share-facebook sd-button share-icon no-text" data-shared="sharing-facebook-6411" href="http://www.walkingrandomly.com/?p=6411&amp;share=facebook" rel="nofollow" target="_blank" title="Click to share on Facebook">
             <span>
             </span>
             <span class="sharing-screen-reader-text">
              Click to share on Facebook (Opens in new window)
             </span>
            </a>
           </li>
           <li class="share-google-plus-1">
            <a class="share-google-plus-1 sd-button share-icon no-text" data-shared="sharing-google-6411" href="http://www.walkingrandomly.com/?p=6411&amp;share=google-plus-1" rel="nofollow" target="_blank" title="Click to share on Google+">
             <span>
             </span>
             <span class="sharing-screen-reader-text">
              Click to share on Google+ (Opens in new window)
             </span>
            </a>
           </li>
           <li class="share-end">
           </li>
          </ul>
         </div>
        </div>
       </div>
       <div class="fixed">
       </div>
      </div>
      <div class="comments">
       <a href="http://www.walkingrandomly.com/?p=6411#comments">
        1 comment
       </a>
      </div>
     </div>
     <div class="post">
      <div class="title">
       <h2>
        <a href="http://www.walkingrandomly.com/?p=6406" rel="bookmark">
         Research Councils UK Cloud Workshop
        </a>
       </h2>
       <div class="fixed">
       </div>
      </div>
      <div class="info">
       <span>
        November 28th, 2017
       </span>
       <span>
        | Categories:
        <a href="http://www.walkingrandomly.com/?cat=86" rel="category">
         Cloud Computing
        </a>
        ,
        <a href="http://www.walkingrandomly.com/?cat=68" rel="category">
         HPC
        </a>
       </span>
       <span>
        | Tags:
       </span>
       <div class="fixed">
       </div>
      </div>
      <div class="content">
       <p class="label-primary">
        The RCUK Cloud Working Group are hosting their 3rd free annual workshop in January 2018 and I’ll be attending.  At the time of writing, there are still places left and
        <strong>
         you can sign up at
        </strong>
        <a href="https://www.eventbrite.co.uk/e/research-councils-uk-cloud-workshop-tickets-39439492584">
         https://www.eventbrite.co.uk/e/research-councils-uk-cloud-workshop-tickets-39439492584
        </a>
       </p>
       <p class="label-primary">
        From the event advertisement:
       </p>
       <div class="has-user-generated-content js-d-read-more read-more js-read-more read-more--medium-down read-more--expanded" data-xd-wired="read-more">
        <div class="js-xd-read-more-toggle-view read-more__toggle-view">
         <div class="js-xd-read-more-contents l-mar-top-3" data-automation="listing-event-description">
          <p>
           This workshop will focus on key areas to address in order for the potential of cloud computing for research to be fully realised:
          </p>
          <ul>
           <li>
            Tackling technical challenges around the use of cloud: for example, porting legacy workloads, scenarios for hybrid cloud, moving large data volumes, use of object storage vs. POSIX file systems.
           </li>
           <li>
            Cloud as enabler for new and novel applications: e.g. use of public cloud toolkits and services around Machine Learning, AI, use of FPGAs and GPU based systems, applications related to Internet of Things and Edge Computing
           </li>
           <li>
            Perspectives from European and international collaborations and research programmes
           </li>
           <li>
            Policy, legal, regulatory and ethical issues, models for funding – case studies for managing sensitive or personal data in the cloud
           </li>
           <li>
            Addressing the skills gap: how to educate researchers in how to best take advantage of cloud; DevOps and ResOps
           </li>
          </ul>
          <p>
           <strong>
            To give a flavour, you can read about
            <em>
             last
            </em>
            year’s workshop
            <a href="https://cloud.ac.uk/2017/03/20/cloud-workshop/" rel="noopener noreferrer nofollow" target="_blank" title="RCUK Cloud Workshop 2016">
             here
            </a>
            or look at the
            <a href="https://cloud.ac.uk/workshops/nov2016/" rel="noopener noreferrer nofollow" target="_blank" title="RCUK Cloud Workshop 2016 Programme">
             programme
            </a>
            from last time.
           </strong>
          </p>
         </div>
        </div>
       </div>
       <div class="sharedaddy sd-sharing-enabled">
        <div class="robots-nocontent sd-block sd-social sd-social-icon sd-sharing">
         <h3 class="sd-title">
          Share this:
         </h3>
         <div class="sd-content">
          <ul>
           <li class="share-twitter">
            <a class="share-twitter sd-button share-icon no-text" data-shared="sharing-twitter-6406" href="http://www.walkingrandomly.com/?p=6406&amp;share=twitter" rel="nofollow" target="_blank" title="Click to share on Twitter">
             <span>
             </span>
             <span class="sharing-screen-reader-text">
              Click to share on Twitter (Opens in new window)
             </span>
            </a>
           </li>
           <li class="share-facebook">
            <a class="share-facebook sd-button share-icon no-text" data-shared="sharing-facebook-6406" href="http://www.walkingrandomly.com/?p=6406&amp;share=facebook" rel="nofollow" target="_blank" title="Click to share on Facebook">
             <span>
             </span>
             <span class="sharing-screen-reader-text">
              Click to share on Facebook (Opens in new window)
             </span>
            </a>
           </li>
           <li class="share-google-plus-1">
            <a class="share-google-plus-1 sd-button share-icon no-text" data-shared="sharing-google-6406" href="http://www.walkingrandomly.com/?p=6406&amp;share=google-plus-1" rel="nofollow" target="_blank" title="Click to share on Google+">
             <span>
             </span>
             <span class="sharing-screen-reader-text">
              Click to share on Google+ (Opens in new window)
             </span>
            </a>
           </li>
           <li class="share-end">
           </li>
          </ul>
         </div>
        </div>
       </div>
       <div class="fixed">
       </div>
      </div>
      <div class="comments">
       <a href="http://www.walkingrandomly.com/?p=6406#respond">
        0 comments
       </a>
      </div>
     </div>
     <div class="post">
      <div class="title">
       <h2>
        <a href="http://www.walkingrandomly.com/?p=6402" rel="bookmark">
         The Sheffield Research Software Engineering blog
        </a>
       </h2>
       <div class="fixed">
       </div>
      </div>
      <div class="info">
       <span>
        November 17th, 2017
       </span>
       <span>
        | Categories:
        <a href="http://www.walkingrandomly.com/?cat=80" rel="category">
         RSE
        </a>
        ,
        <a href="http://www.walkingrandomly.com/?cat=15" rel="category">
         walking randomly
        </a>
       </span>
       <span>
        | Tags:
       </span>
       <div class="fixed">
       </div>
      </div>
      <div class="content">
       <p>
        <strong>
         Taps microphone:
        </strong>
        ‘Is this still on?’
       </p>
       <p>
        I’ve been blogging on here for over 10 years and this article marks the end of the largest gap in posting that I’ve ever done — almost 6 months!  A couple of people have asked me if I’ve given up on WalkingRandomly and the answer is an emphatic ‘No’….I’ve just been extremely busy elsewhere.
       </p>
       <p>
        <strong>
         Sheffield Research Software Engineering
        </strong>
       </p>
       <p>
        The primary use of my time has been working with
        <a href="https://www.sheffield.ac.uk/dcs/latest-news/richmond-and-croucher-awarded-epsrc-rse-fellowships-1.540914">
         fellow RSE Fellow, Paul Richmond,
        </a>
        to set up and run The University of Sheffield’s Research Software Engineering group.  There’s
        <a href="http://rse.shef.ac.uk/contact/">
         now 8 of us in total
        </a>
        with the promise of more on the horizon.
       </p>
       <p>
        The group has a blog over at
        <a href="http://rse.shef.ac.uk/blog/">
         http://rse.shef.ac.uk/blog/
        </a>
        and a twitter feed at
        <a href="https://twitter.com/RSE_Sheffield">
         https://twitter.com/RSE_Sheffield
        </a>
       </p>
       <p>
        <strong>
         WalkingRandomly
        </strong>
       </p>
       <p>
        I’ve not given up on blogging here and there will be more in the future.
       </p>
       <div class="sharedaddy sd-sharing-enabled">
        <div class="robots-nocontent sd-block sd-social sd-social-icon sd-sharing">
         <h3 class="sd-title">
          Share this:
         </h3>
         <div class="sd-content">
          <ul>
           <li class="share-twitter">
            <a class="share-twitter sd-button share-icon no-text" data-shared="sharing-twitter-6402" href="http://www.walkingrandomly.com/?p=6402&amp;share=twitter" rel="nofollow" target="_blank" title="Click to share on Twitter">
             <span>
             </span>
             <span class="sharing-screen-reader-text">
              Click to share on Twitter (Opens in new window)
             </span>
            </a>
           </li>
           <li class="share-facebook">
            <a class="share-facebook sd-button share-icon no-text" data-shared="sharing-facebook-6402" href="http://www.walkingrandomly.com/?p=6402&amp;share=facebook" rel="nofollow" target="_blank" title="Click to share on Facebook">
             <span>
             </span>
             <span class="sharing-screen-reader-text">
              Click to share on Facebook (Opens in new window)
             </span>
            </a>
           </li>
           <li class="share-google-plus-1">
            <a class="share-google-plus-1 sd-button share-icon no-text" data-shared="sharing-google-6402" href="http://www.walkingrandomly.com/?p=6402&amp;share=google-plus-1" rel="nofollow" target="_blank" title="Click to share on Google+">
             <span>
             </span>
             <span class="sharing-screen-reader-text">
              Click to share on Google+ (Opens in new window)
             </span>
            </a>
           </li>
           <li class="share-end">
           </li>
          </ul>
         </div>
        </div>
       </div>
       <div class="fixed">
       </div>
      </div>
      <div class="comments">
       <a href="http://www.walkingrandomly.com/?p=6402#respond">
        0 comments
       </a>
      </div>
     </div>
     <div class="post">
      <div class="title">
       <h2>
        <a href="http://www.walkingrandomly.com/?p=6366" rel="bookmark">
         HPC-centric Research Software Engineering role within RSE Sheffield
        </a>
       </h2>
       <div class="fixed">
       </div>
      </div>
      <div class="info">
       <span>
        May 24th, 2017
       </span>
       <span>
        | Categories:
        <a href="http://www.walkingrandomly.com/?cat=80" rel="category">
         RSE
        </a>
       </span>
       <span>
        | Tags:
       </span>
       <div class="fixed">
       </div>
      </div>
      <div class="content">
       <p>
        A job opportunity within the
        <a href="http://rse.shef.ac.uk/">
         RSE Sheffield
        </a>
        group is available under the job title of
        <strong>
         “Research Software Engineer in High Performance Computing (HPC) enabled Multi-Scale Modelling”
        </strong>
        . This is a EU funded position with a focus on supporting the biomedical computing community within the
        <a href="http://insigneo.org/">
         INSIGNEO
        </a>
        institute.
       </p>
       <p>
        We are looking for people who can both write good code and be part of a thriving, supportive community. You’ll
        <a href="http://rse.shef.ac.uk/contact/">
         join a diverse team
        </a>
        who collaborate with academics across the entire
        <a href="https://www.sheffield.ac.uk/">
         University of Sheffield
        </a>
        , the wider
        <a href="https://www.software.ac.uk/blog/2017-04-10-state-nation-report-research-software-engineers-released">
         national community of RSEs
        </a>
        and multiple outreach organisations including
        <a href="http://rse.shef.ac.uk/blog/sheffield-code-firstgirls/">
         Sheffield Code First:Girls
        </a>
        ,
        <a href="https://www.meetup.com/SheffieldR-Sheffield-R-Users-Group/">
         Sheffield R User’s group
        </a>
        , the
        <a href="https://www.software.ac.uk/">
         Software Sustainability Institute
        </a>
        and our own
        <a href="http://rse.shef.ac.uk/blog/code-cafe-R/">
         Code Cafe
        </a>
        .
       </p>
       <p>
        We also collaborate closely with the
        <a href="https://www.sheffield.ac.uk/cics/home">
         University IT department, CiCS
        </a>
        , on matters such as
        <a href="http://docs.hpc.shef.ac.uk/en/latest/">
         High Performance Computing
        </a>
        and software applications support and the
        <a href="https://www.sheffield.ac.uk/library">
         University Library
        </a>
        on Research Data Management and
        <a href="https://software-carpentry.org/">
         Software and Data Carpentry
        </a>
        . Outside of the University, we collaborate with commercial organisations such as
        <a href="http://nag.co.uk/">
         NAG
        </a>
        ,
        <a href="https://uk.mathworks.com/">
         Mathworks
        </a>
        ,
        <a href="http://rse.shef.ac.uk/blog/the-university-of-sheffield-named-an-nvidia-gpu-education-center/">
         NVIDIA
        </a>
        and
        <a href="https://www.microsoft.com/en-us/research/">
         Microsoft
        </a>
        along with open source communities such as
        <a href="http://opendreamkit.org/">
         OpenDreamKit
        </a>
        and
        <a href="https://science.mozilla.org/">
         Mozilla Science Lab
        </a>
        .
       </p>
       <p>
        <a href="http://rse.ac.uk/">
         Research Software Engineering
        </a>
        as a career pathway is relatively new in the UK and The University of Sheffield is at the forefront of this movement. Our group is academically-led, based in the department of Computer Science and is backed by
        <a href="http://www.walkingrandomly.com/?p=6037">
         2 EPSRC Research Software Engineering Fellowships
        </a>
        and funding drawn from multiple collaborators in all University faculties including the l
        <a href="http://rse.shef.ac.uk/blog/linuistics_grant_2016/">
         argest grant ever awarded to our faculty of arts and humanities
        </a>
        .
       </p>
       <p>
        All of this activity has one aim:
        <strong>
         To help better research through better software.
        </strong>
       </p>
       <p>
        <a href="http://www.walkingrandomly.com/wp-content/uploads/2017/05/rse-sheffield-logo.png">
         <img alt="rse-sheffield-logo" class="alignnone size-medium wp-image-6380" height="164" sizes="(max-width: 300px) 100vw, 300px" src="http://www.walkingrandomly.com/wp-content/uploads/2017/05/rse-sheffield-logo-300x164.png" srcset="http://www.walkingrandomly.com/wp-content/uploads/2017/05/rse-sheffield-logo-300x164.png 300w, http://www.walkingrandomly.com/wp-content/uploads/2017/05/rse-sheffield-logo-768x420.png 768w, http://www.walkingrandomly.com/wp-content/uploads/2017/05/rse-sheffield-logo.png 800w" width="300"/>
        </a>
       </p>
       <p>
        See the
        <a href="http://rse.shef.ac.uk/blog/research_software_engineer_in_high_performance_computing/">
         Sheffield RSE website
        </a>
        or
        <a href="http://www.jobs.ac.uk/job/BBN749/research-software-engineer-in-high-performance-computing-hpc-enabled-multi-scale-modelling/">
         jobs.ac.uk
        </a>
        for more details and perhaps consider coming to join us?
       </p>
       <p>
       </p>
       <div class="sharedaddy sd-sharing-enabled">
        <div class="robots-nocontent sd-block sd-social sd-social-icon sd-sharing">
         <h3 class="sd-title">
          Share this:
         </h3>
         <div class="sd-content">
          <ul>
           <li class="share-twitter">
            <a class="share-twitter sd-button share-icon no-text" data-shared="sharing-twitter-6366" href="http://www.walkingrandomly.com/?p=6366&amp;share=twitter" rel="nofollow" target="_blank" title="Click to share on Twitter">
             <span>
             </span>
             <span class="sharing-screen-reader-text">
              Click to share on Twitter (Opens in new window)
             </span>
            </a>
           </li>
           <li class="share-facebook">
            <a class="share-facebook sd-button share-icon no-text" data-shared="sharing-facebook-6366" href="http://www.walkingrandomly.com/?p=6366&amp;share=facebook" rel="nofollow" target="_blank" title="Click to share on Facebook">
             <span>
             </span>
             <span class="sharing-screen-reader-text">
              Click to share on Facebook (Opens in new window)
             </span>
            </a>
           </li>
           <li class="share-google-plus-1">
            <a class="share-google-plus-1 sd-button share-icon no-text" data-shared="sharing-google-6366" href="http://www.walkingrandomly.com/?p=6366&amp;share=google-plus-1" rel="nofollow" target="_blank" title="Click to share on Google+">
             <span>
             </span>
             <span class="sharing-screen-reader-text">
              Click to share on Google+ (Opens in new window)
             </span>
            </a>
           </li>
           <li class="share-end">
           </li>
          </ul>
         </div>
        </div>
       </div>
       <div class="fixed">
       </div>
      </div>
      <div class="comments">
       <a href="http://www.walkingrandomly.com/?p=6366#respond">
        0 comments
       </a>
      </div>
     </div>
     <div class="post">
      <div class="title">
       <h2>
        <a href="http://www.walkingrandomly.com/?p=6370" rel="bookmark">
         Faster transpose matrix multiplication in R
        </a>
       </h2>
       <div class="fixed">
       </div>
      </div>
      <div class="info">
       <span>
        May 23rd, 2017
       </span>
       <span>
        | Categories:
        <a href="http://www.walkingrandomly.com/?cat=40" rel="category">
         Free software
        </a>
        ,
        <a href="http://www.walkingrandomly.com/?cat=73" rel="category">
         Linear Algebra
        </a>
        ,
        <a href="http://www.walkingrandomly.com/?cat=7" rel="category">
         programming
        </a>
        ,
        <a href="http://www.walkingrandomly.com/?cat=36" rel="category">
         R
        </a>
        ,
        <a href="http://www.walkingrandomly.com/?cat=67" rel="category">
         Scientific Software
        </a>
        ,
        <a href="http://www.walkingrandomly.com/?cat=42" rel="category">
         tutorials
        </a>
       </span>
       <span>
        | Tags:
       </span>
       <div class="fixed">
       </div>
      </div>
      <div class="content">
       <p>
        I’m working on optimising some R code written by a researcher at University of Sheffield and its very much a war of attrition! There’s no easily optimisable hotspot and there’s no obvious way to leverage parallelism. Progress is being made by steadily identifying places here and there where we can do a little better. 10% here and 20% there can eventually add up to something worth shouting about.
       </p>
       <p>
        One such micro-optimisation we discovered involved multiplying two matrices together where one of them needed to be transposed. Here’s a minimal example.
       </p>
       <pre>#Set random seed for reproducibility
set.seed(3)

# Generate two random n by n matrices
n = 10
a = matrix(runif(n*n,0,1),n,n)
b = matrix(runif(n*n,0,1),n,n)

# Multiply the matrix a by the transpose of b
c = a %*% t(b)
</pre>
       <p>
        When the speed of linear algebra computations are an issue in R, it makes sense to use a version that is linked to a fast implementation of
        <a href="http://www.netlib.org/blas/">
         BLAS
        </a>
        and
        <a href="http://www.netlib.org/lapack/">
         LAPACK
        </a>
        and we
        <a href="http://rse.shef.ac.uk/blog/intel-R-iceberg/">
         are already doing that on our HPC system
        </a>
        .
       </p>
       <p>
        Here, I am using version 3.3.3 of
        <a href="https://mran.microsoft.com/open/">
         Microsoft R Open
        </a>
        which links to
        <a href="https://software.intel.com/en-us/intel-mkl">
         Intel’s MKL
        </a>
        (an implementation of BLAS and LAPACK) on a Windows laptop.
       </p>
       <p>
        In R, there is another way to do the computation
        <strong>
         c = a %*% t(b)
        </strong>
        — we can make use of the
        <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/crossprod.html">
         tcrossprod
        </a>
        function (There is also a crossprod function for when you want to do
        <strong>
         t(a) %*% b
        </strong>
        )
       </p>
       <pre> c_new = tcrossprod(a,b)</pre>
       <p>
        Let’s check for equality
       </p>
       <pre>c_new == c
[,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
[1,] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[2,] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[3,] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[4,] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[5,] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[6,] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[7,] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[8,] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[9,] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[10,] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
</pre>
       <p>
        Sometimes, when comparing the two methods you may find that some of those entries are FALSE which may worry you!
        <br/>
        If that happens, computing the difference between the two results should convince you that all is OK and that the differences are just because of numerical noise. This happens sometimes when dealing with floating point arithmetic (For example, see
        <a href="http://www.walkingrandomly.com/?p=5380">
         http://www.walkingrandomly.com/?p=5380
        </a>
        ).
       </p>
       <p>
        Let’s time the two methods using the microbenchmark package.
       </p>
       <pre>install.packages('microbenchmark')
library(microbenchmark)
</pre>
       <p>
        We time just the matrix multiplication part of the code above:
       </p>
       <pre>microbenchmark(
original = a %*% t(b),
tcrossprod = tcrossprod(a,b)
)


Unit: nanoseconds
expr min lq mean median uq max neval
original 2918 3283 3491.312 3283 3647 18599 1000
tcrossprod 365 730 756.278 730 730 10576 1000
</pre>
       <p>
        We are only saving microseconds here but that’s more than a factor of 4 speed-up in this small matrix case. If that computation is being performed a lot in a tight loop (and for our real application, it was), it can add up to quite a difference.
       </p>
       <p>
        As the matrices get bigger, the speed-benefit in percentage terms gets lower but tcrossprod always seems to be the faster method. For example, here are the results for 1000 x 1000 matrices
       </p>
       <pre>#Set random seed for reproducibility
set.seed(3)

# Generate two random n by n matrices
n = 1000
a = matrix(runif(n*n,0,1),n,n)
b = matrix(runif(n*n,0,1),n,n)

microbenchmark(
original = a %*% t(b),
tcrossprod = tcrossprod(a,b)
)

Unit: milliseconds
expr min lq mean median uq max neval
original 18.93015 26.65027 31.55521 29.17599 31.90593 71.95318 100
tcrossprod 13.27372 18.76386 24.12531 21.68015 23.71739 61.65373 100
</pre>
       <p>
        <strong>
         The cost of not using an optimised version of BLAS and LAPACK
        </strong>
       </p>
       <p>
        While writing this blog post, I accidentally used the
        <a href="https://cran.r-project.org/">
         CRAN version of R
        </a>
        .  The recently released version 3.4. Unlike Microsoft R Open, this is not linked to the Intel MKL and so matrix multiplication is rather slower.
       </p>
       <p>
        For our original 10 x 10 matrix example we have:
       </p>
       <pre>library(microbenchmark)
#Set random seed for reproducibility
set.seed(3)

# Generate two random n by n matrices
n = 10
a = matrix(runif(n*n,0,1),n,n)
b = matrix(runif(n*n,0,1),n,n)

microbenchmark(
original = a %*% t(b),
tcrossprod = tcrossprod(a,b)
)

Unit: microseconds
       expr   min    lq    mean median     uq    max neval
   original 3.647 3.648 4.22727  4.012 4.1945 22.611   100
 tcrossprod 1.094 1.459 1.52494  1.459 1.4600  3.282   100
</pre>
       <p>
        Everything is a little slower as you might expect and the conclusion of this article —
        <strong>
         tcrossprod(a,b)
        </strong>
        <strong>
         is faster than a %*% t(b)
        </strong>
        — seems to still be valid.
       </p>
       <p>
        However, when we move to 1000 x 1000 matrices, this changes
       </p>
       <pre>library(microbenchmark)
#Set random seed for reproducibility
set.seed(3)

# Generate two random n by n matrices
n = 1000
a = matrix(runif(n*n,0,1),n,n)
b = matrix(runif(n*n,0,1),n,n)

microbenchmark(
original = a %*% t(b),
tcrossprod = tcrossprod(a,b)
)

Unit: milliseconds
       expr      min       lq     mean   median       uq       max neval
   original 546.6008 587.1680 634.7154 602.6745 658.2387  957.5995   100
 tcrossprod 560.4784 614.9787 658.3069 634.7664 685.8005 1013.2289   100
</pre>
       <p>
        As expected, both results are much slower than when using the Intel MKL-lined version of R (~600 milliseconds vs ~31 milliseconds) — nothing new there.  More disappointingly, however, is that now tcrossprod is slightly
        <strong>
         slower
        </strong>
        than explicitly taking the transpose.
       </p>
       <p>
        As such, this particular micro-optimisation might not be as effective as we might like for all versions of R.
       </p>
       <div class="sharedaddy sd-sharing-enabled">
        <div class="robots-nocontent sd-block sd-social sd-social-icon sd-sharing">
         <h3 class="sd-title">
          Share this:
         </h3>
         <div class="sd-content">
          <ul>
           <li class="share-twitter">
            <a class="share-twitter sd-button share-icon no-text" data-shared="sharing-twitter-6370" href="http://www.walkingrandomly.com/?p=6370&amp;share=twitter" rel="nofollow" target="_blank" title="Click to share on Twitter">
             <span>
             </span>
             <span class="sharing-screen-reader-text">
              Click to share on Twitter (Opens in new window)
             </span>
            </a>
           </li>
           <li class="share-facebook">
            <a class="share-facebook sd-button share-icon no-text" data-shared="sharing-facebook-6370" href="http://www.walkingrandomly.com/?p=6370&amp;share=facebook" rel="nofollow" target="_blank" title="Click to share on Facebook">
             <span>
             </span>
             <span class="sharing-screen-reader-text">
              Click to share on Facebook (Opens in new window)
             </span>
            </a>
           </li>
           <li class="share-google-plus-1">
            <a class="share-google-plus-1 sd-button share-icon no-text" data-shared="sharing-google-6370" href="http://www.walkingrandomly.com/?p=6370&amp;share=google-plus-1" rel="nofollow" target="_blank" title="Click to share on Google+">
             <span>
             </span>
             <span class="sharing-screen-reader-text">
              Click to share on Google+ (Opens in new window)
             </span>
            </a>
           </li>
           <li class="share-end">
           </li>
          </ul>
         </div>
        </div>
       </div>
       <div class="fixed">
       </div>
      </div>
      <div class="comments">
       <a href="http://www.walkingrandomly.com/?p=6370#respond">
        0 comments
       </a>
      </div>
     </div>
    </div>
    <!-- sidebar START -->
    <div id="sidebar">
     <!-- Style Switcher START -->
     <!-- Style Switcher END -->
     <!-- showcase -->
     <ul id="widgets">
      <li class="widget widget_categories">
       <h3>
        Categories
       </h3>
       <ul>
        <li class="cat-item cat-item-35">
         <a href="http://www.walkingrandomly.com/?cat=35">
          Android
         </a>
         (15)
        </li>
        <li class="cat-item cat-item-75">
         <a href="http://www.walkingrandomly.com/?cat=75">
          Apple
         </a>
         (4)
        </li>
        <li class="cat-item cat-item-20">
         <a href="http://www.walkingrandomly.com/?cat=20">
          applications
         </a>
         (14)
        </li>
        <li class="cat-item cat-item-38">
         <a href="http://www.walkingrandomly.com/?cat=38">
          Books
         </a>
         (6)
        </li>
        <li class="cat-item cat-item-65">
         <a href="http://www.walkingrandomly.com/?cat=65">
          C/C++
         </a>
         (6)
        </li>
        <li class="cat-item cat-item-37">
         <a href="http://www.walkingrandomly.com/?cat=37">
          Carnival of Math
         </a>
         (25)
        </li>
        <li class="cat-item cat-item-16">
         <a href="http://www.walkingrandomly.com/?cat=16">
          Chemistry
         </a>
         (2)
        </li>
        <li class="cat-item cat-item-86">
         <a href="http://www.walkingrandomly.com/?cat=86">
          Cloud Computing
         </a>
         (6)
        </li>
        <li class="cat-item cat-item-48">
         <a href="http://www.walkingrandomly.com/?cat=48">
          Condor
         </a>
         (6)
        </li>
        <li class="cat-item cat-item-71">
         <a href="http://www.walkingrandomly.com/?cat=71">
          control theory
         </a>
         (2)
        </li>
        <li class="cat-item cat-item-44">
         <a href="http://www.walkingrandomly.com/?cat=44">
          CUDA
         </a>
         (13)
        </li>
        <li class="cat-item cat-item-58">
         <a href="http://www.walkingrandomly.com/?cat=58">
          Financial Math
         </a>
         (3)
        </li>
        <li class="cat-item cat-item-34">
         <a href="http://www.walkingrandomly.com/?cat=34">
          Fortran
         </a>
         (3)
        </li>
        <li class="cat-item cat-item-46">
         <a href="http://www.walkingrandomly.com/?cat=46">
          Fractals
         </a>
         (6)
        </li>
        <li class="cat-item cat-item-40">
         <a href="http://www.walkingrandomly.com/?cat=40">
          Free software
         </a>
         (14)
        </li>
        <li class="cat-item cat-item-13">
         <a href="http://www.walkingrandomly.com/?cat=13">
          games
         </a>
         (13)
        </li>
        <li class="cat-item cat-item-6">
         <a href="http://www.walkingrandomly.com/?cat=6">
          general math
         </a>
         (137)
        </li>
        <li class="cat-item cat-item-51">
         <a href="http://www.walkingrandomly.com/?cat=51">
          GPU
         </a>
         (17)
        </li>
        <li class="cat-item cat-item-49">
         <a href="http://www.walkingrandomly.com/?cat=49">
          Guest posts
         </a>
         (9)
        </li>
        <li class="cat-item cat-item-68">
         <a href="http://www.walkingrandomly.com/?cat=68">
          HPC
         </a>
         (16)
        </li>
        <li class="cat-item cat-item-43">
         <a href="http://www.walkingrandomly.com/?cat=43">
          iPad
         </a>
         (9)
        </li>
        <li class="cat-item cat-item-27">
         <a href="http://www.walkingrandomly.com/?cat=27">
          iPhone
         </a>
         (11)
        </li>
        <li class="cat-item cat-item-14">
         <a href="http://www.walkingrandomly.com/?cat=14">
          java
         </a>
         (3)
        </li>
        <li class="cat-item cat-item-59">
         <a href="http://www.walkingrandomly.com/?cat=59">
          Julia
         </a>
         (5)
        </li>
        <li class="cat-item cat-item-45">
         <a href="http://www.walkingrandomly.com/?cat=45">
          just for fun
         </a>
         (30)
        </li>
        <li class="cat-item cat-item-3">
         <a href="http://www.walkingrandomly.com/?cat=3">
          Latex
         </a>
         (5)
        </li>
        <li class="cat-item cat-item-73">
         <a href="http://www.walkingrandomly.com/?cat=73">
          Linear Algebra
         </a>
         (6)
        </li>
        <li class="cat-item cat-item-5">
         <a href="http://www.walkingrandomly.com/?cat=5">
          Linux
         </a>
         (40)
        </li>
        <li class="cat-item cat-item-26">
         <a href="http://www.walkingrandomly.com/?cat=26">
          Mac OS X
         </a>
         (8)
        </li>
        <li class="cat-item cat-item-52">
         <a href="http://www.walkingrandomly.com/?cat=52">
          Making Mathematica Faster
         </a>
         (2)
        </li>
        <li class="cat-item cat-item-53">
         <a href="http://www.walkingrandomly.com/?cat=53">
          Making MATLAB faster
         </a>
         (17)
        </li>
        <li class="cat-item cat-item-25">
         <a href="http://www.walkingrandomly.com/?cat=25">
          Maple
         </a>
         (23)
        </li>
        <li class="cat-item cat-item-4">
         <a href="http://www.walkingrandomly.com/?cat=4">
          math software
         </a>
         (217)
        </li>
        <li class="cat-item cat-item-17">
         <a href="http://www.walkingrandomly.com/?cat=17">
          mathcad
         </a>
         (16)
        </li>
        <li class="cat-item cat-item-8">
         <a href="http://www.walkingrandomly.com/?cat=8">
          mathematica
         </a>
         (105)
        </li>
        <li class="cat-item cat-item-11">
         <a href="http://www.walkingrandomly.com/?cat=11">
          matlab
         </a>
         (138)
        </li>
        <li class="cat-item cat-item-39">
         <a href="http://www.walkingrandomly.com/?cat=39">
          Maxima
         </a>
         (2)
        </li>
        <li class="cat-item cat-item-56">
         <a href="http://www.walkingrandomly.com/?cat=56">
          Microsoft
         </a>
         (3)
        </li>
        <li class="cat-item cat-item-55">
         <a href="http://www.walkingrandomly.com/?cat=55">
          Mobile Mathematics
         </a>
         (15)
        </li>
        <li class="cat-item cat-item-47">
         <a href="http://www.walkingrandomly.com/?cat=47">
          Month of Math Software
         </a>
         (30)
        </li>
        <li class="cat-item cat-item-28">
         <a href="http://www.walkingrandomly.com/?cat=28">
          NAG Library
         </a>
         (32)
        </li>
        <li class="cat-item cat-item-61">
         <a href="http://www.walkingrandomly.com/?cat=61">
          natural language
         </a>
         (2)
        </li>
        <li class="cat-item cat-item-76">
         <a href="http://www.walkingrandomly.com/?cat=76">
          Numerics
         </a>
         (3)
        </li>
        <li class="cat-item cat-item-78">
         <a href="http://www.walkingrandomly.com/?cat=78">
          Open Data Science
         </a>
         (7)
        </li>
        <li class="cat-item cat-item-32">
         <a href="http://www.walkingrandomly.com/?cat=32">
          Open Source
         </a>
         (23)
        </li>
        <li class="cat-item cat-item-50">
         <a href="http://www.walkingrandomly.com/?cat=50">
          OpenCL
         </a>
         (5)
        </li>
        <li class="cat-item cat-item-41">
         <a href="http://www.walkingrandomly.com/?cat=41">
          parallel programming
         </a>
         (21)
        </li>
        <li class="cat-item cat-item-19">
         <a href="http://www.walkingrandomly.com/?cat=19">
          physics
         </a>
         (9)
        </li>
        <li class="cat-item cat-item-9">
         <a href="http://www.walkingrandomly.com/?cat=9">
          pocket pc
         </a>
         (9)
        </li>
        <li class="cat-item cat-item-72">
         <a href="http://www.walkingrandomly.com/?cat=72">
          Powershell
         </a>
         (1)
        </li>
        <li class="cat-item cat-item-54">
         <a href="http://www.walkingrandomly.com/?cat=54">
          probability
         </a>
         (1)
        </li>
        <li class="cat-item cat-item-21">
         <a href="http://www.walkingrandomly.com/?cat=21">
          Problem of the week
         </a>
         (12)
        </li>
        <li class="cat-item cat-item-7">
         <a href="http://www.walkingrandomly.com/?cat=7">
          programming
         </a>
         (154)
        </li>
        <li class="cat-item cat-item-31">
         <a href="http://www.walkingrandomly.com/?cat=31">
          python
         </a>
         (45)
        </li>
        <li class="cat-item cat-item-36">
         <a href="http://www.walkingrandomly.com/?cat=36">
          R
         </a>
         (17)
        </li>
        <li class="cat-item cat-item-63">
         <a href="http://www.walkingrandomly.com/?cat=63">
          random numbers
         </a>
         (7)
        </li>
        <li class="cat-item cat-item-74">
         <a href="http://www.walkingrandomly.com/?cat=74">
          raspberry pi
         </a>
         (1)
        </li>
        <li class="cat-item cat-item-10">
         <a href="http://www.walkingrandomly.com/?cat=10">
          retro computers
         </a>
         (6)
        </li>
        <li class="cat-item cat-item-80">
         <a href="http://www.walkingrandomly.com/?cat=80">
          RSE
         </a>
         (36)
        </li>
        <li class="cat-item cat-item-24">
         <a href="http://www.walkingrandomly.com/?cat=24">
          sage interactions
         </a>
         (13)
        </li>
        <li class="cat-item cat-item-12">
         <a href="http://www.walkingrandomly.com/?cat=12">
          Science
         </a>
         (16)
        </li>
        <li class="cat-item cat-item-67">
         <a href="http://www.walkingrandomly.com/?cat=67">
          Scientific Software
         </a>
         (31)
        </li>
        <li class="cat-item cat-item-64">
         <a href="http://www.walkingrandomly.com/?cat=64">
          simulink
         </a>
         (2)
        </li>
        <li class="cat-item cat-item-69">
         <a href="http://www.walkingrandomly.com/?cat=69">
          software deployment
         </a>
         (6)
        </li>
        <li class="cat-item cat-item-29">
         <a href="http://www.walkingrandomly.com/?cat=29">
          Statistics
         </a>
         (4)
        </li>
        <li class="cat-item cat-item-30">
         <a href="http://www.walkingrandomly.com/?cat=30">
          The internet
         </a>
         (12)
        </li>
        <li class="cat-item cat-item-23">
         <a href="http://www.walkingrandomly.com/?cat=23">
          Travel
         </a>
         (5)
        </li>
        <li class="cat-item cat-item-60">
         <a href="http://www.walkingrandomly.com/?cat=60">
          trivia
         </a>
         (1)
        </li>
        <li class="cat-item cat-item-42">
         <a href="http://www.walkingrandomly.com/?cat=42">
          tutorials
         </a>
         (11)
        </li>
        <li class="cat-item cat-item-1">
         <a href="http://www.walkingrandomly.com/?cat=1">
          Uncategorized
         </a>
         (20)
        </li>
        <li class="cat-item cat-item-79">
         <a href="http://www.walkingrandomly.com/?cat=79">
          University of Sheffield
         </a>
         (7)
        </li>
        <li class="cat-item cat-item-22">
         <a href="http://www.walkingrandomly.com/?cat=22">
          Vacation
         </a>
         (2)
        </li>
        <li class="cat-item cat-item-15">
         <a href="http://www.walkingrandomly.com/?cat=15">
          walking randomly
         </a>
         (49)
        </li>
        <li class="cat-item cat-item-66">
         <a href="http://www.walkingrandomly.com/?cat=66">
          Windows
         </a>
         (10)
        </li>
        <li class="cat-item cat-item-70">
         <a href="http://www.walkingrandomly.com/?cat=70">
          Windows 8
         </a>
         (1)
        </li>
        <li class="cat-item cat-item-33">
         <a href="http://www.walkingrandomly.com/?cat=33">
          Wolfram Alpha
         </a>
         (18)
        </li>
        <li class="cat-item cat-item-18">
         <a href="http://www.walkingrandomly.com/?cat=18">
          Wolfram Demonstrations
         </a>
         (24)
        </li>
       </ul>
      </li>
      <li class="widget widget_archive">
       <h3>
        Archives
       </h3>
       <ul>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201804">
          April 2018
         </a>
         (1)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201803">
          March 2018
         </a>
         (2)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201802">
          February 2018
         </a>
         (3)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201711">
          November 2017
         </a>
         (2)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201705">
          May 2017
         </a>
         (3)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201704">
          April 2017
         </a>
         (1)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201703">
          March 2017
         </a>
         (3)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201702">
          February 2017
         </a>
         (3)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201701">
          January 2017
         </a>
         (3)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201612">
          December 2016
         </a>
         (2)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201610">
          October 2016
         </a>
         (1)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201609">
          September 2016
         </a>
         (2)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201608">
          August 2016
         </a>
         (3)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201607">
          July 2016
         </a>
         (3)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201606">
          June 2016
         </a>
         (1)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201605">
          May 2016
         </a>
         (3)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201604">
          April 2016
         </a>
         (10)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201603">
          March 2016
         </a>
         (5)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201602">
          February 2016
         </a>
         (2)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201601">
          January 2016
         </a>
         (3)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201512">
          December 2015
         </a>
         (4)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201511">
          November 2015
         </a>
         (2)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201510">
          October 2015
         </a>
         (5)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201509">
          September 2015
         </a>
         (1)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201508">
          August 2015
         </a>
         (1)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201507">
          July 2015
         </a>
         (5)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201506">
          June 2015
         </a>
         (2)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201505">
          May 2015
         </a>
         (1)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201504">
          April 2015
         </a>
         (3)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201503">
          March 2015
         </a>
         (1)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201502">
          February 2015
         </a>
         (3)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201501">
          January 2015
         </a>
         (2)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201412">
          December 2014
         </a>
         (2)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201411">
          November 2014
         </a>
         (3)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201410">
          October 2014
         </a>
         (1)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201409">
          September 2014
         </a>
         (1)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201408">
          August 2014
         </a>
         (3)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201407">
          July 2014
         </a>
         (3)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201406">
          June 2014
         </a>
         (3)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201405">
          May 2014
         </a>
         (7)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201404">
          April 2014
         </a>
         (2)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201403">
          March 2014
         </a>
         (4)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201402">
          February 2014
         </a>
         (3)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201401">
          January 2014
         </a>
         (2)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201312">
          December 2013
         </a>
         (8)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201311">
          November 2013
         </a>
         (1)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201310">
          October 2013
         </a>
         (3)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201309">
          September 2013
         </a>
         (4)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201308">
          August 2013
         </a>
         (6)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201307">
          July 2013
         </a>
         (5)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201306">
          June 2013
         </a>
         (2)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201305">
          May 2013
         </a>
         (3)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201304">
          April 2013
         </a>
         (4)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201303">
          March 2013
         </a>
         (5)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201302">
          February 2013
         </a>
         (6)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201301">
          January 2013
         </a>
         (7)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201212">
          December 2012
         </a>
         (4)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201211">
          November 2012
         </a>
         (3)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201210">
          October 2012
         </a>
         (6)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201209">
          September 2012
         </a>
         (5)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201208">
          August 2012
         </a>
         (11)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201207">
          July 2012
         </a>
         (6)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201206">
          June 2012
         </a>
         (7)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201205">
          May 2012
         </a>
         (2)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201204">
          April 2012
         </a>
         (7)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201203">
          March 2012
         </a>
         (4)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201202">
          February 2012
         </a>
         (7)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201201">
          January 2012
         </a>
         (1)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201112">
          December 2011
         </a>
         (5)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201110">
          October 2011
         </a>
         (6)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201109">
          September 2011
         </a>
         (4)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201108">
          August 2011
         </a>
         (4)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201107">
          July 2011
         </a>
         (7)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201106">
          June 2011
         </a>
         (10)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201105">
          May 2011
         </a>
         (6)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201104">
          April 2011
         </a>
         (4)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201103">
          March 2011
         </a>
         (6)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201102">
          February 2011
         </a>
         (3)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201101">
          January 2011
         </a>
         (8)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201012">
          December 2010
         </a>
         (4)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201011">
          November 2010
         </a>
         (7)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201010">
          October 2010
         </a>
         (7)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201009">
          September 2010
         </a>
         (5)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201008">
          August 2010
         </a>
         (1)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201007">
          July 2010
         </a>
         (3)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201006">
          June 2010
         </a>
         (4)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201005">
          May 2010
         </a>
         (3)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201004">
          April 2010
         </a>
         (9)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201003">
          March 2010
         </a>
         (8)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201002">
          February 2010
         </a>
         (6)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=201001">
          January 2010
         </a>
         (9)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=200912">
          December 2009
         </a>
         (11)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=200911">
          November 2009
         </a>
         (10)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=200910">
          October 2009
         </a>
         (8)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=200909">
          September 2009
         </a>
         (9)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=200908">
          August 2009
         </a>
         (16)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=200907">
          July 2009
         </a>
         (10)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=200906">
          June 2009
         </a>
         (11)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=200905">
          May 2009
         </a>
         (19)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=200904">
          April 2009
         </a>
         (25)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=200903">
          March 2009
         </a>
         (14)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=200902">
          February 2009
         </a>
         (12)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=200901">
          January 2009
         </a>
         (14)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=200812">
          December 2008
         </a>
         (15)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=200811">
          November 2008
         </a>
         (15)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=200810">
          October 2008
         </a>
         (18)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=200809">
          September 2008
         </a>
         (7)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=200808">
          August 2008
         </a>
         (15)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=200807">
          July 2008
         </a>
         (11)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=200806">
          June 2008
         </a>
         (8)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=200805">
          May 2008
         </a>
         (11)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=200804">
          April 2008
         </a>
         (13)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=200803">
          March 2008
         </a>
         (11)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=200802">
          February 2008
         </a>
         (14)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=200801">
          January 2008
         </a>
         (13)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=200712">
          December 2007
         </a>
         (9)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=200711">
          November 2007
         </a>
         (4)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=200710">
          October 2007
         </a>
         (6)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=200709">
          September 2007
         </a>
         (6)
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?m=200708">
          August 2007
         </a>
         (3)
        </li>
       </ul>
      </li>
      <li class="widget widget_links">
       <h3>
        Blogroll
       </h3>
       <ul class="xoxo blogroll">
        <li>
         <a href="http://qchu.wordpress.com/">
          Annoying Precision
         </a>
        </li>
        <li>
         <a href="http://myreckonings.com/wordpress/">
          Dead Reckonings
         </a>
        </li>
        <li>
         <a href="http://gottwurfelt.wordpress.com/">
          God Plays dice
         </a>
        </li>
        <li>
         <a href="http://letsplaymath.wordpress.com/">
          Let's play math
         </a>
        </li>
        <li>
         <a href="http://mathnotations.blogspot.com/" title="http://mathnotations.blogspot.com/">
          Math Notations
         </a>
        </li>
        <li>
         <a href="http://www.mathpuzzle.com/">
          Math Puzzles
         </a>
        </li>
        <li>
         <a href="http://nickhigham.wordpress.com/">
          Nick Higham (Applied math)
         </a>
        </li>
        <li>
         <a href="http://pleasemakeanote.blogspot.com/">
          PleaseMakeANote
         </a>
        </li>
        <li>
         <a href="http://www.mathfinance.cn/">
          Quantitative Finance Collector
         </a>
        </li>
        <li>
         <a href="http://www.terminally-incoherent.com/blog/">
          Terminally Incoherent
         </a>
        </li>
        <li>
         <a href="http://www.johndcook.com/blog/">
          The Endeavour
         </a>
        </li>
        <li>
         <a href="http://blog.plover.com/">
          The Universe of Discourse
         </a>
        </li>
       </ul>
      </li>
      <li class="widget widget_meta">
       <h3>
        Meta
       </h3>
       <ul>
        <li>
         <a href="http://www.walkingrandomly.com/wp-login.php">
          Log in
         </a>
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?feed=rss2">
          Entries
          <abbr title="Really Simple Syndication">
           RSS
          </abbr>
         </a>
        </li>
        <li>
         <a href="http://www.walkingrandomly.com/?feed=comments-rss2">
          Comments
          <abbr title="Really Simple Syndication">
           RSS
          </abbr>
         </a>
        </li>
        <li>
         <a href="https://wordpress.org/" title="Powered by WordPress, state-of-the-art semantic personal publishing platform.">
          WordPress.org
         </a>
        </li>
       </ul>
      </li>
     </ul>
     <!-- showcase 2 -->
    </div>
    <!-- sidebar END -->
    <div class="fixed">
    </div>
    <div id="bottom">
     <div class="postnav">
      <span class="alignleft">
      </span>
      <span class="alignright">
       <a href="http://www.walkingrandomly.com/?paged=2">
        Older Entries »
       </a>
      </span>
      <div class="fixed">
      </div>
     </div>
     <div class="anchor">
      <span>
       <a href="#" onclick="MGJS.goTop();return false;">
        TOP
       </a>
      </span>
     </div>
     <div class="fixed">
     </div>
    </div>
    <div class="fixed">
    </div>
   </div>
  </div>
  <!-- footer START -->
  <div id="footer">
   <div class="inner">
    <div class="content">
     <p id="about">
      Copyright © 2007-2018 Walking Randomly | Powered by
      <a href="http://wordpress.org/">
       WordPress
      </a>
      | Theme by
      <a href="http://www.neoease.com/">
       NeoEase
      </a>
     </p>
     <ul id="admin">
      <li>
       <a href="http://www.walkingrandomly.com/wp-login.php">
        Log in
       </a>
      </li>
     </ul>
     <div class="fixed">
     </div>
    </div>
   </div>
  </div>
  <!-- footer END -->
  <!-- Powered by WPtouch: 4.3.26 -->
  <div style="display:none">
  </div>
  <script type="text/javascript">
   window.WPCOM_sharing_counts = {"http:\/\/www.walkingrandomly.com\/?p=6453":6453,"http:\/\/www.walkingrandomly.com\/?p=6444":6444,"http:\/\/www.walkingrandomly.com\/?p=6441":6441,"http:\/\/www.walkingrandomly.com\/?p=6431":6431,"http:\/\/www.walkingrandomly.com\/?p=6392":6392,"http:\/\/www.walkingrandomly.com\/?p=6411":6411,"http:\/\/www.walkingrandomly.com\/?p=6406":6406,"http:\/\/www.walkingrandomly.com\/?p=6402":6402,"http:\/\/www.walkingrandomly.com\/?p=6366":6366,"http:\/\/www.walkingrandomly.com\/?p=6370":6370};
  </script>
  <script src="https://s0.wp.com/wp-content/js/devicepx-jetpack.js?ver=201825" type="text/javascript">
  </script>
  <script src="http://www.walkingrandomly.com/wp-content/plugins/wp-syntax/js/wp-syntax.js?ver=1.1" type="text/javascript">
  </script>
  <script src="http://s.gravatar.com/js/gprofiles.js?ver=2018Junaa" type="text/javascript">
  </script>
  <script type="text/javascript">
   /* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
  </script>
  <script src="http://www.walkingrandomly.com/wp-content/plugins/jetpack/modules/wpgroho.js?ver=4.6.11" type="text/javascript">
  </script>
  <script src="http://www.walkingrandomly.com/wp-includes/js/wp-embed.min.js?ver=4.6.11" type="text/javascript">
  </script>
  <script type="text/javascript">
   /* <![CDATA[ */
var sharing_js_options = {"lang":"en","counts":"1"};
/* ]]> */
  </script>
  <script src="http://www.walkingrandomly.com/wp-content/plugins/jetpack/modules/sharedaddy/sharing.js?ver=4.7.1" type="text/javascript">
  </script>
  <script type="text/javascript">
   var windowOpen;
			jQuery( document.body ).on( 'click', 'a.share-twitter', function() {
				// If there's another sharing window open, close it.
				if ( 'undefined' !== typeof windowOpen ) {
					windowOpen.close();
				}
				windowOpen = window.open( jQuery( this ).attr( 'href' ), 'wpcomtwitter', 'menubar=1,resizable=1,width=600,height=350' );
				return false;
			});
var windowOpen;
			jQuery( document.body ).on( 'click', 'a.share-facebook', function() {
				// If there's another sharing window open, close it.
				if ( 'undefined' !== typeof windowOpen ) {
					windowOpen.close();
				}
				windowOpen = window.open( jQuery( this ).attr( 'href' ), 'wpcomfacebook', 'menubar=1,resizable=1,width=600,height=400' );
				return false;
			});
var windowOpen;
			jQuery( document.body ).on( 'click', 'a.share-google-plus-1', function() {
				// If there's another sharing window open, close it.
				if ( 'undefined' !== typeof windowOpen ) {
					windowOpen.close();
				}
				windowOpen = window.open( jQuery( this ).attr( 'href' ), 'wpcomgoogle-plus-1', 'menubar=1,resizable=1,width=480,height=550' );
				return false;
			});
  </script>
  <script async="" defer="" src="https://stats.wp.com/e-201825.js" type="text/javascript">
  </script>
  <script type="text/javascript">
   _stq = window._stq || [];
	_stq.push([ 'view', {v:'ext',j:'1:4.7.1',blog:'51126282',post:'0',tz:'1',srv:'www.walkingrandomly.com'} ]);
	_stq.push([ 'clickTrackerInit', '51126282', '0' ]);
  </script>
  <script type="text/javascript">
   var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
  </script>
  <script type="text/javascript">
   try {
var pageTracker = _gat._getTracker("UA-15600688-1");
pageTracker._trackPageview();
} catch(err) {}
  </script>
 </body>
</html>
